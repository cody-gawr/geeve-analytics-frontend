
<h1 mat-dialog-title>Add Payment Plan</h1>
<div mat-dialog-content class="sa_forms_design">



   <div fxLayout="row wrap" fxLayoutGap="2%">
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Patient Name</label>
           <input matInput tabindex="1" [(ngModel)]="data.patient_name" placeholder="" [formControl]="patient_name" class="form-control-dialog" required="true">
    <span class="error-message" *ngIf="patient_name.invalid">Please enter Patient Name</span>

    </div>
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Email</label>
           <input matInput tabindex="1" [(ngModel)]="data.patient_email" placeholder="" id="email" [formControl]="email" class="form-control-dialog" required="true">
           <input matInput style="color: #FF0000;" tabindex="1" *ngIf="valplans" [(ngModel)]="valplans" required="true" readonly>
    <span class="error-message" *ngIf="email.invalid">{{getErrorMessage()}}</span>
    </div>
   </div>

 <div fxLayout="row wrap" fxLayoutGap="2%">
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Patient DOB</label>
           
       <input matInput type="date" tabindex="1" [(ngModel)]="data.patient_dob" placeholder=""  class="form-control-dialog" required="true"  max="{{minDate}}">
    <span class="error-message" *ngIf="patient_dob.invalid">Please enter Patient Name</span>

    </div>
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Patient Phone No</label>
          <input matInput tabindex="1" oninput="this.value = this.value.slice(0,10);" [(ngModel)]="data.patient_phone_no" placeholder=""  class="form-control-dialog" required="true">
    <span class="error-message" *ngIf="patient_phone_no.invalid">Please enter Patient Name</span>

    </div>
   </div>

<div fxLayout="row wrap" fxLayoutGap="2%">
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Plan Name</label>
        <input matInput tabindex="1" [(ngModel)]="data.plan_name" placeholder="" class="form-control-dialog" required="true">
    <span class="error-message" *ngIf="plan_name.invalid">Please enter Patient Name</span>

    </div>
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Plan Description</label>
        <input matInput tabindex="1" [(ngModel)]="data.plan_description" placeholder="" class="form-control-dialog" required="true">
    <span class="error-message" *ngIf="plan_description.invalid">Please enter Patient Name</span>

    </div>
   </div>

<div fxLayout="row wrap" fxLayoutGap="2%">
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Plan Fee ($)</label>
        <input matInput tabindex="1" id="total_amount"  [(ngModel)]="data.total_amount"  type="number" min="0"  placeholder="" class="form-control-dialog" (change)="deposite_amount(data.deposite_percentage)" required="true">
    <span class="error-message" *ngIf="total_amount.invalid">Please enter Patient Name</span>
  
    </div>
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Setup Fee ($)</label>
       <input matInput tabindex="1" id="setup_amount" type="number" min="0" (change)="deposite_amount(data.deposite_percentage)" [(ngModel)]="data.setup_fee" placeholder="" class="form-control-dialog" required="true">
    <span class="error-message" *ngIf="setup_fee.invalid">Please enter Patient Name</span>
  
    </div>
   </div>

<div fxLayout="row wrap" fxLayoutGap="2%">
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Deposited Percentage (%)</label>
         <input matInput tabindex="1" id="deposite_percentage" type="number" min="0" max ="100"  (change)="deposite_amount(data.deposite_percentage)" [(ngModel)]="data.deposite_percentage" placeholder="" class="form-control-dialog" required="true" readOnly>
    <span class="error-message" *ngIf="deposite_percentage.invalid">Please enter Patient Name</span>

    </div>
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Deposited Amount ($)</label>
       <input matInput tabindex="1" id="deposit_amount" type="number" min="0"  (change)="updatePercentageByAmount(data.deposit_amount,data.total_amount)" [(ngModel)]="data.deposit_amount" placeholder="" class="form-control-dialog" required="true">
    <span class="error-message" *ngIf="deposit_amount.invalid">Please enter Patient Name</span>

    </div>
   </div>

<div fxLayout="row wrap" fxLayoutGap="2%">
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Balance Amount ($)</label>
         <input matInput tabindex="1" id="balance_amount" type="number" min="0" [(ngModel)]="data.balance_amount" placeholder="" class="form-control-dialog" readonly>
    <span class="error-message" *ngIf="balance_amount.invalid">Please enter Patient Name</span>
         
    </div>
<!--     <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Duration</label>
       <mat-select tabindex="1" [(ngModel)]= "data.payment_frequency" required="true" (ngModelChange)="updateDurationLabel(data.payment_frequency)" >
              <mat-option value="MONTHLY">MONTHLY</mat-option>
              <mat-option value="WEEKLY">WEEKLY</mat-option>
            </mat-select>
    </div> -->

    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
      <div class="duration width-full">
       <label>Duration</label>
         <div class="btn-group sa-pull-left">
          <span class="position-relative btn-switch">
           <input type="radio" id="same1" name="planLength" [(ngModel)]="data.payment_frequency" (ngModelChange)="updateDurationLabel(data.payment_frequency)" value="MONTHLY">
          <label class="active-duration" for="same1">Monthly</label>
           </span>
           <span class="position-relative btn-switch">
          <input type="radio" id="same2" name="planLength" [(ngModel)]="data.payment_frequency" (ngModelChange)="updateDurationLabel(data.payment_frequency)" value="WEEKLY">
            <label class="active-duration" for="same2">WEEKLY</label>
          </span>
         </div>
      </div>
    </div>
   </div>
   <div fxLayout="row wrap" fxLayoutGap="2%">
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Frequency of payments</label>
          <input matInput tabindex="1" id="duration" type="number" min="0" [(ngModel)]="data.duration" placeholder="{{durationPaymentPlaceholder}}" (change)="durationcal(data.duration)" class="form-control-dialog" required="true">
    </div>
    <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Balance Amount ($)</label>
        <input matInput tabindex="1" type="number" step=".01" min="0" [(ngModel)]="data.monthly_weekly_payment" placeholder="{{MonthlyWeeklyPlaceholder}}" class="form-control-dialog" readonly>
    </div>
   </div>
    <div fxLayout="row wrap" fxLayoutGap="2%" >
   <div fxFlex.gt-md="49" fxFlex="100" class="sa-form-group">
        <label>Start Date</label>
          <input matInput tabindex="1" type="date" [(ngModel)]="data.start_date" placeholder="Start Date" class="form-control-dialog" required="true" [min]="minDate">
    </div>
 </div>
</div>
<div mat-dialog-actions class="sa-pull-right">
  <button mat-button (click)="save(data)" tabindex="2" class="mat-raised-button mat-dc">OK</button>
  <button mat-button (click)="onNoClick()" tabindex="-1" class="mat-raised-button mat-gray">Cancel</button>
</div>