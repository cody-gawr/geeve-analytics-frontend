<mat-expansion-panel>
  <mat-expansion-panel-header>
    <mat-panel-title> Goals </mat-panel-title>
  </mat-expansion-panel-header>
  <mat-card-content>
    <div class="Goals-dropdowns mb-2" fxLayout="row wrap" fxLayoutGap="20px">
      <div
        class="sa_mat_select_topbar mat_selectbox"
        fxFlex="20"
        fxFlex.md="20"
        fxFlex.sm="30"
        fxFlex.xs="100"
      >
        <mat-form-field floatLabel="never">
          <mat-select
            class="external_dentist"
            [(ngModel)]="selectedGoalCategory$.value"
            (ngModelChange)="handleGoalCategorySelection($event)"
          >
            <mat-option value="">Entire Clinic</mat-option>
            <mat-option *ngFor="let dentist of dentists" [value]="dentist.providerId">
              {{dentist.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div
        class="sa_mat_select_topbar mat_selectbox"
        fxFlex="20"
        fxFlex.md="20"
        fxFlex.sm="30"
        fxFlex.xs="100"
      >
        <mat-form-field floatLabel="never">
          <mat-select
            class="external_dentist"
            [(ngModel)]="selectedTab"
            (ngModelChange)="onTabChanged($event)"
          >
            <mat-option
              *ngFor="let tab of tabs | keyvalue"
              [value]="tabsConstants[tab.key]"
            >
              {{ tabsConstants[tab.key] }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div fxLayout="row wrap goals-form-container">
      <div
        fxFlex.gt-sm="100%"
        fxFlex="100"
        class="sa_mattabs_design sa_matforms_design"
      >
        <div *ngFor="let tab of tabs | keyvalue">
          <div class="example-small-box">
            <form
              [formGroup]="tab.value.form"
              class="basic-form"
              *ngIf="selectedTab === tabsConstants[tab.key]"
            >
              <div class="matInput-form-group">
                <div
                  class="sa-form-group"
                  *ngFor="let control of tabs[tab.key].controls"
                >
                  <label class="goals-form-field-label">{{
                    control.label
                  }}</label>
                  <input
                    class="goals-form-input-field"
                    matInput
                    [formControl]="tab.value.form.controls[control.name]"
                  />
                </div>
              </div>
            </form>
          </div>
        </div>
        <div class="sa-form-group-btn">
          <button class="btn save-button" (click)="onSubmit()">Save</button>
        </div>
      </div>
    </div>
  </mat-card-content>
</mat-expansion-panel>
