<div class="AddUserPopup setting list">
  <h1 *ngIf="!data.list_id" mat-dialog-title>Add Task List</h1>
  <h1 *ngIf="data.list_id" mat-dialog-title>Edit Task List</h1>

  <div mat-dialog-content class="sa_forms_design tasksList">
    <div *ngIf="!showAddItem">
      <div class="sa-form-group">
        <label>Task List Name</label>
        <input
          [(ngModel)]="data.list_name"
          class="mat-form-control"
          required="true"
          placeholder=""
        />
      </div>
      <div class="sa-form-group">
        <label>Assigned To</label>
        <mat-select
          [(ngModel)]="data.assigned_roles"
          placeholder="Assigned Roles"
          [multiple]="true"
          #multiSelect
        >
          <mat-option #allSelected (click)="toggleAllSelection()" [value]="'0'">All</mat-option>
          <mat-option *ngFor="let user of assigneeData" [value]="user.id">
            {{user.name}}
          </mat-option>
        </mat-select>
      </div>
    </div>
    <div *ngIf="showAddItem">
      <div class="sa-form-group">
        <label>Task Name</label>
        <input
          [(ngModel)]="data.task_name"
          class="mat-form-control"
          required="true"
          placeholder=""
        />
      </div>
    </div>
  </div>
  <div mat-dialog-content class="sa_forms_design" *ngIf="data.list_id">
    <div>
      <div
        cdkDropList
        [cdkDropListData]="dataSource"
        (cdkDropListDropped)="drop($event)"
        class="drag-container"
      >
        <mat-table #table [dataSource]="dataSource" class="mat-elevation-z8">
          <ng-container matColumnDef="position">
            <mat-header-cell *matHeaderCellDef> No. </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <mat-icon class="example-drag-cursor">reorder</mat-icon>
              {{ element.position }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.name }} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="weight">
            <mat-header-cell *matHeaderCellDef> Weight </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.weight }} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="symbol">
            <mat-header-cell *matHeaderCellDef> Symbol </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.symbol }} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="quantity">
            <mat-header-cell *matHeaderCellDef> Quantity </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.quantity }} </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>

          <mat-row
            *matRowDef="let row; columns: displayedColumns"
            cdkDrag
            [cdkDragData]="row"
          ></mat-row>
        </mat-table>
      </div>
      <div *ngIf="data.totalRecords > 10">
        <pagination-controls
          [maxSize]="maxSize"
          [autoHide]="autoHide"
          (pageChange)="pageChanged($event)"
        >
        </pagination-controls>
      </div>
    </div>
  </div>
  <div mat-dialog-actions class="justify-between list">
    <!-- <i *ngIf="data.list_id" class="fa fa-plus m-r-10" (click)="additemNew(data)">Add Task</i> -->
    <button
      *ngIf="!addTaskInput && data.list_id"
      class="mat-raised-button mat-dc float-right ng-star-inserted"
      (click)="addTaskInput = true"
    >
      Add Task
    </button>
    <button
      *ngIf="addTaskInput && data.list_id"
      class="mat-raised-button mat-dc float-right ng-star-inserted"
      (click)="addTaskIn(data)"
    >
      Add Task
    </button>
    <!-- <i *ngIf="data.list_id" (click)="additemNew(data)">Add Task</i> -->
  </div>
  <div mat-dialog-actions class="justify-between">
    <button mat-button (click)="onNoClick()" tabindex="-1" class="mat-raised-button mat-gray">
      Cancel
    </button>
    <button
      *ngIf="!data.list_id"
      (click)="save(data)"
      [disabled]="data.list_name == '' || data.assigned_roles == '' "
      tabindex="0"
      class="mat-raised-button mat-dc float-right"
    >
      Save
    </button>
    <button
      *ngIf="data.list_id"
      [disabled]="data.list_name == '' || data.assigned_roles == ''"
      (click)="update(data)"
      tabindex="0"
      class="mat-raised-button mat-dc float-right"
    >
      Update
    </button>
  </div>
</div>
