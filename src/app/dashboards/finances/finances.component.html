<select
  class="sa_select internal_dentist"
  [(ngModel)]="selectedDentist"
  (ngModelChange)="loadDentist($event)"
  [style.display]="'none'">
  <option value="all">All Dentist</option>
  <option *ngFor="let dentist of dentists" [value]="dentist.providerId">
    {{ dentist.name }}
  </option>
</select>
<input
  type="button"
  id="dentist_initiate"
  (click)="initiate_dentist()"
  [style.display]="'none'" />
<input
  type="button"
  id="clinic_initiate"
  (click)="initiate_clinic()"
  [style.display]="'none'" />
<input type="text" id="page_title" value="Finances" [style.display]="'none'" />
<div class="sa_dashboard_inner_content sa_dentist_graphs_area">
  <div class="sa_card topbar-strip">
    <div
      class="dashboard-top-header"
      fxLayout="row wrap"
      fxLayoutGap="0px"
      fxLayoutGap.md="0"
      fxLayoutGap.sm="0"
      fxLayoutGap.xs="0">
      <div fxFlex>
        <app-date-menu-bar
          #dateBar
          (filter)="filterDate($event)"
          (changeDate)="choosedDate($event)">
        </app-date-menu-bar>
      </div>
      <div class="dh-target">
        <div class="onofftoogle">
          <span class="trend_mode_title">Trend:</span>
          <mat-button-toggle-group
            #group="matButtonToggleGroup"
            name="fontStyle"
            class="trendToggle sa_toogle_group2 toggle_switcher"
            aria-label="Font Style"
            [disabled]="trendxero">
            <mat-button-toggle
              checked
              value="off"
              [disabled]="Apirequest <= 0 ? false : true"
              (click)="Apirequest <= 0 ? toggleFilter('off') : false"
              class="target_off target_filter">
              <span>Off</span>
            </mat-button-toggle>
            <mat-button-toggle
              value="current"
              class="target_current target_filter"
              [disabled]="Apirequest <= 0 ? false : true"
              (click)="Apirequest <= 0 ? toggleFilter('current') : false">
              <span>Monthly</span>
            </mat-button-toggle>
            <mat-button-toggle
              value="historic"
              class="target_historic target_filter"
              [disabled]="Apirequest <= 0 ? false : true"
              (click)="Apirequest <= 0 ? toggleFilter('historic') : false">
              <span>Annual</span>
            </mat-button-toggle>
          </mat-button-toggle-group>
        </div>
      </div>
    </div>
  </div>
  <div class="">
    <div fxLayout="row wrap">
      <div
        fxFlex.gt-sm="100"
        fxFlex.gt-xs="100"
        fxFlex="100"
        class="sa_flex_transparent">
        {{ startDate }}- {{ endDate }}
      </div>
    </div>

    <!-- Column-->
    <div class="nonTrendMode">
      <div
        class="pb-2"
        fxLayout="row wrap"
        fxLayoutGap="20px"
        fxLayoutGap.md="20px"
        fxLayoutGap.sm="0"
        fxLayoutGap.xs="0">
        <div
          fxFlex="calc(32% - 10px)"
          fxFlex.md="calc(32% - 10px)"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="md_mrn">
          <mat-card-content class="sa_matcard_content">
            <!-- column -->
            <div
              class="sa_main_grid_dashboard profit-yellow d-flex no-block align-items-center">
              <div class="stats-icon">
                <img src="../assets/images/net-profit-xero.png" alt />
                <i class="fas fa-chart-bar"></i>
              </div>

              <div class="stats">
                <h3 class="m-0">Production</h3>
                <h1
                  class="m-0"
                  *ngIf="
                    productionstats;
                    else calculatingNetProfitProductionVal
                  ">
                  $ {{ netProfitProductionVal | number: '1.0-0' }}
                </h1>
                <ng-template #calculatingNetProfitProductionVal>
                  <h1 class="m-0">
                    <div class="loader-text">Calculating...</div>
                  </h1>
                </ng-template>
              </div>

              <div class="info-button">
                <div class="info-icon-container">
                  <img
                    [tooltip]="charTips['31']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </div>
            </div>
          </mat-card-content>
        </div>
        <div
          *ngIf="isVisibleAccountGraphs"
          fxFlex="calc(32% - 10px)"
          fxFlex.md="calc(32% - 10px)"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="md_mrn">
          <mat-card-content class="sa_matcard_content">
            <!-- column -->
            <div
              class="sa_main_grid_dashboard profit-purple d-flex no-block align-items-center">
              <ng-container
                *ngIf="
                  (xeroConnect || myobConnect) &&
                  !netprofitstatsError &&
                  isCompleteMonth
                ">
                <ng-container *ngIf="netprofitstats">
                  <div class="stats-icon">
                    <img src="../assets/images/net-profit.png" alt />
                    <i class="fas fa-chart-bar"></i>
                  </div>
                  <div class="stats">
                    <h3 class="m-0">Net Profit</h3>
                    <h1 class="m-0">${{ netProfitVal | number: '1.0-0' }}</h1>
                  </div>
                </ng-container>

                <div class="info-button">
                  <div class="info-icon-container">
                    <img
                      [tooltip]="charTips['26']"
                      src="../assets/images/info-icon.png"
                      alt="info-icon"
                      class="info-icon" />
                  </div>
                </div>
              </ng-container>
              <ng-container
                *ngIf="!netprofitstats && (xeroConnect || myobConnect)">
                <div class="stats-icon">
                  <img src="../assets/images/net-profit.png" alt />
                  <i class="fas fa-chart-bar"></i>
                </div>
                <div class="stats">
                  <h3 class="m-0">Net Profit</h3>
                  <h1 class="m-0">
                    <div class="loader-text">Calculating...</div>
                  </h1>
                </div>
              </ng-container>
              <div *ngIf="!xeroConnect && !myobConnect" class="w-100">
                <div class="sa_nodata_div no-found-data">
                  <p>Please ensure your Xero/MYOB account is connected</p>
                </div>
              </div>

              <div
                *ngIf="
                  !multipleClinicsSelected &&
                  (xeroConnect || myobConnect) &&
                  netprofitstats &&
                  !isCompleteMonth
                "
                class="w-100">
                <div class="sa_nodata_div no-found-data">
                  <p>
                    Please select a date range consisting of full months to view
                    Accounting charts
                  </p>
                </div>
              </div>
            </div>
          </mat-card-content>
        </div>

        <div
          *ngIf="!isVisibleAccountGraphs"
          fxFlex="calc(32% - 10px)"
          fxFlex.md="calc(32% - 10px)"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="md_mrn">
          <mat-card-content class="sa_matcard_content">
            <!-- column -->
            <div
              class="sa_main_grid_dashboard profit-purple d-flex no-block align-items-center">
              <ng-container>
                <div class="stats-icon">
                  <img src="../assets/images/net-profit.png" alt />
                  <i class="fas fa-chart-bar"></i>
                </div>
                <div *ngIf="finProductionPerVisitLoader" class="stats">
                  <h3 class="m-0">Production Per Visit</h3>
                  <h1 class="m-0">
                    <div class="loader-text">Calculating...</div>
                  </h1>
                </div>
                <div *ngIf="!finProductionPerVisitLoader" class="stats">
                  <h3 class="m-0">Production Per Visit</h3>
                  <h1 class="m-0">${{ productionVal | number: '1.0-0' }}</h1>
                </div>
                <div class="info-button">
                  <div class="info-icon-container">
                    <img
                      [tooltip]="charTips['32']"
                      src="../assets/images/info-icon.png"
                      alt="info-icon"
                      class="info-icon" />
                  </div>
                </div>
              </ng-container>
            </div>
          </mat-card-content>
        </div>

        <div
          fxFlex="calc(32% - 10px)"
          fxFlex.md="calc(32% - 10px)"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="last md_mrn">
          <mat-card-content class="sa_matcard_content">
            <!-- column -->
            <div
              *ngIf="isVisibleAccountGraphs"
              class="sa_main_grid_dashboard profit-green d-flex no-block align-items-center">
              <ng-container
                *ngIf="
                  (xeroConnect || myobConnect) &&
                  !netprofitPerError &&
                  isCompleteMonth
                ">
                <ng-container *ngIf="netprofitpercentstats">
                  <div class="stats-icon">
                    <img src="../assets/images/net-profit-PMS.png" alt />
                    <i class="fas fa-chart-bar"></i>
                  </div>

                  <div class="stats">
                    <h3 class="m-0">Net Profit %</h3>
                    <h1 class="m-0">
                      {{ netProfitPmsVal | number: '1.0-0' }}%
                    </h1>
                  </div>
                </ng-container>
                <div class="info-button">
                  <div class="info-icon-container">
                    <img
                      [tooltip]="charTips['27']"
                      src="../assets/images/info-icon.png"
                      alt="info-icon"
                      class="info-icon" />
                  </div>
                </div>
              </ng-container>
              <ng-container
                *ngIf="!netprofitpercentstats && (xeroConnect || myobConnect)">
                <div class="stats-icon">
                  <img src="../assets/images/net-profit-PMS.png" alt />
                  <i class="fas fa-chart-bar"></i>
                </div>
                <div class="stats">
                  <h3 class="m-0">Net Profit %</h3>
                  <h1 class="m-0">
                    <div class="loader-text">Calculating...</div>
                  </h1>
                </div>
              </ng-container>
              <div *ngIf="!xeroConnect && !myobConnect" class="w-100">
                <div class="sa_nodata_div no-found-data">
                  <p>Please ensure your Xero/MYOB account is connected</p>
                </div>
              </div>

              <div
                *ngIf="
                  !multipleClinicsSelected &&
                  (xeroConnect || myobConnect) &&
                  !isCompleteMonth
                "
                class="w-100">
                <div class="sa_nodata_div no-found-data">
                  <p>
                    Please select a date range consisting of full months to view
                    Accounting charts
                  </p>
                </div>
              </div>
            </div>
            <div
              *ngIf="!isVisibleAccountGraphs"
              class="sa_main_grid_dashboard profit-green d-flex no-block align-items-center">
              <ng-container>
                <div class="stats-icon">
                  <img src="../assets/images/net-profit-PMS.png" alt />
                  <i class="fas fa-chart-bar"></i>
                </div>
                <div *ngIf="finCollectionLoader" class="stats">
                  <h3 class="m-0">Collection</h3>
                  <h1 class="m-0">
                    <div class="loader-text">Calculating...</div>
                  </h1>
                </div>
                <div *ngIf="!finCollectionLoader" class="stats">
                  <h3 class="m-0">Collection</h3>
                  <h1 class="m-0">${{ collectionVal | number: '1.0-0' }}</h1>
                </div>
                <div class="info-button">
                  <div class="info-icon-container">
                    <img
                      [tooltip]="charTips['33']"
                      src="../assets/images/info-icon.png"
                      alt="info-icon"
                      class="info-icon" />
                  </div>
                </div>
              </ng-container>
            </div>
          </mat-card-content>
        </div>
      </div>
      <div
        fxLayout="row wrap"
        fxLayoutGap="20px"
        fxLayoutGap.md="0px"
        fxLayoutGap.sm="0"
        fxLayoutGap.xs="0">
        <div
          *ngIf="isVisibleAccountGraphs"
          fxFlex="calc(64% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="sa_flexbg md_mrn expenses_card custom_ngx_cw01">
          <mat-card class="chart_card">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center">
                Expenses
                <div class="info-icon-container">
                  <button
                    *ngIf="single.length > 15"
                    class="mat-button-sm mat-green-button btn-mar"
                    (click)="ngxModalService.getModal('show_more').open()">
                    Show More
                  </button>
                  <img
                    [tooltip]="charTips['29']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div class="card-body">
                <div class="sa_chart_summary_flip_main">
                  <div class="sa_chart_summary_flip">
                    <div class="chart sa_chart_flip sa_flip">
                      <div fxLayout="row wrap">
                        <div
                          class="ngx-charts-fix"
                          fxLayout="row"
                          fxLayoutAlign="space-around center"
                          fxFlex.lg="65"
                          fxFlex.xl="65"
                          fxFlex.md="100"
                          fxFlex.sm="100"
                          fxFlex.xs="100"
                          fxFlex="70">
                          <div
                            *ngIf="
                              (xeroConnect || myobConnect) &&
                              categoryExpensesLoader &&
                              !categoryExpensesError
                            "
                            class="loader_container">
                            <img
                              class="loader_ico"
                              src="../assets/images/720.gif" />
                            <div class="loader-text">Calculating...</div>
                          </div>
                          <div
                            *ngIf="
                              (xeroConnect || myobConnect) &&
                              !(
                                categoryExpensesError ||
                                multipleClinicsSelected ||
                                categoryExpensesLoader
                              ) &&
                              isCompleteMonth
                            ">
                            <ngx-charts-pie-chart
                              fxFlexAlign="center"
                              *ngIf="
                                pieChartLabels && pieChartLabels.length > 0
                              "
                              class="chart-container sa_chart_custom"
                              [view]="[500, 320]"
                              [scheme]="colorScheme"
                              [trimLabels]="true"
                              [maxLabelLength]="15"
                              [results]="selectedData"
                              [legend]="false"
                              [explodeSlices]="explodeSlices"
                              [labels]="showLabels"
                              [arcWidth]="arcWidth"
                              [doughnut]="doughnut"
                              [gradient]="gradient"
                              [tooltipDisabled]="tooltipDisabled"
                              [tooltipText]="pieTooltipText"
                              [labelFormatting]="pieLabelText">
                            </ngx-charts-pie-chart>
                          </div>
                          <div
                            *ngIf="
                              (xeroConnect || myobConnect) &&
                                pieChartLabels.length == 0 &&
                                !(
                                  categoryExpensesLoader ||
                                  multipleClinicsSelected
                                );
                              isCompleteMonth
                            "
                            class="no-data-placeholder">
                            <div class="sa_nodata_div"></div>
                            <p class="chart-placeholder-text">
                              No expenses found for the selected period
                            </p>
                          </div>

                          <div
                            *ngIf="
                              (xeroConnect || myobConnect) &&
                                expenseMultiChartLabels.length == 0 &&
                                !categoryExpensesLoader &&
                                multipleClinicsSelected;
                              isCompleteMonth
                            "
                            class="no-data-placeholder">
                            <div class="sa_nodata_div"></div>
                            <p class="chart-placeholder-text">
                              No expenses found for the selected period
                            </p>
                          </div>

                          <div
                            *ngIf="!(xeroConnect || myobConnect)"
                            class="w-100">
                            <div class="sa_nodata_div no-found-data">
                              <p>
                                Please ensure your Xero/MYOB account is
                                connected
                              </p>
                            </div>
                          </div>
                          <div
                            *ngIf="
                              multipleClinicsSelected &&
                              expenseMultiChartLabels.length > 0
                            "
                            class="w-100"
                            style="min-height: 280px">
                            <canvas
                              #myCanvas2
                              baseChart
                              [datasets]="expenseMultiChartData"
                              [labels]="expenseMultiChartLabels"
                              [options]="labelBarOptionsMultiPercentage"
                              [legend]="false"
                              [type]="stackedChartType"
                              (chartHover)="chartHovered($event)"
                              (chartClick)="chartClicked($event)"></canvas>
                          </div>
                          <div
                            *ngIf="
                              (xeroConnect || myobConnect) &&
                              !(isCompleteMonth || categoryExpensesLoader)
                            "
                            class="w-100">
                            <div class="sa_nodata_div no-found-data">
                              <p>
                                Please select a date range consisting of full
                                months to view Accounting charts
                              </p>
                            </div>
                          </div>
                        </div>
                        <div
                          class=""
                          fxFlex.lg="35"
                          fxFlex.xl="35"
                          fxFlex.md="100"
                          fxFlex.sm="100"
                          fxFlex.xs="100"
                          fxFlex="30"
                          fxFlexAlign="center">
                          <div class="sa_pie_chart_txtdata">
                            <h6>Industry Benchmarks</h6>
                            <span><b>Dentist:</b> 35-40%</span>
                            <span><b>Lab Fees:</b> 2-4%</span>
                            <span><b>Consumables:</b> 6-8%</span>
                            <span><b>Advertising:</b> 2-5%</span>
                            <span><b>Rent:</b> 4-8%</span>
                            <span><b>Wages (non-clinical):</b> 18-23%</span>
                            <span><b>EBITDA (profit):</b> 5-25%</span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div
                      class="sa_summary_flip sa_flip"
                      *ngIf="pieChartLabels && pieChartLabels.length > 0">
                      <div
                        class="sa_list_show"
                        *ngFor="let expense of pieChartData; let i = index">
                        <span class="sa_clr_box sa_clr{{ i }}m"></span>
                        <span class="frl">{{ pieChartLabels[i] }}</span>
                        <span class="frv"
                          >{{ expense | number: '1.0-0' }} ({{
                            pieChartDataPercentres[i]
                          }}%)</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>

        <div
          *ngIf="!isVisibleAccountGraphs"
          fxFlex="calc(36% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="sa_flexbg md_mrn expenses_card custom_ngx_cw01">
          <mat-card class="">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center total-dicount-title">
                <span
                  class="predicted3Tool sa_inc_dec_arrows trend_arrow"
                  mat-icon-button
                  matTooltip="{{ trendText }} : ${{
                    totalDiscountChartTrendTotal | number: '1.0-0'
                  }}"
                  *ngIf="trendText">
                  <img
                    class="trend_ico"
                    src="../assets/images/trend_{{
                      totalDiscountChartTrendIcon
                    }}.png" />
                </span>
                <span class="title"> Total Discounts </span>
                <div class="info-icon-container">
                  <img
                    [tooltip]="charTips['34']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div class="card-body chart-spacing">
                <div
                  *ngIf="isExact; else nonExactTemplate"
                  class="no-data-placeholder">
                  <div class="sa_nodata_div"></div>
                  <p class="chart-placeholder-text">Coming Soon...</p>
                </div>
                <ng-template #nonExactTemplate>
                  <div
                    class="chart w-100"
                    *ngIf="
                      totalDiscountChartData &&
                        totalDiscountChartData.length > 0 &&
                        showInternal &&
                        showClinicBar;
                      else clinicianChart
                    ">
                    <div class="clinician-chart">
                      <canvas
                        class="totalDiscount"
                        #myCanvas
                        baseChart
                        [datasets]="[{ data: totalDiscountChartClinicsData }]"
                        [labels]="totalDiscountChartLabelsClinics"
                        [type]="totalDiscountChartType"
                        (chartHover)="chartHovered($event)"
                        (chartClick)="chartClicked($event)"
                        [legend]="true"
                        [options]="pieChartOptions2"
                        [plugins]="totalDiscountPluginObservable$ | async"
                        [colors]="pieChartColors">
                      </canvas>
                    </div>
                  </div>
                  <ng-template #clinicianChart>
                    <div class="chart w-100">
                      <div class="clinician-chart">
                        <canvas
                          class="totalDiscount"
                          #myCanvas
                          baseChart
                          [datasets]="[{ data: totalDiscountChartData }]"
                          [labels]="totalDiscountChartLabels"
                          [type]="totalDiscountChartType"
                          (chartHover)="chartHovered($event)"
                          (chartClick)="chartClicked($event)"
                          [legend]="false"
                          [options]="pieChartOptions2"
                          [plugins]="totalDiscountPluginObservable$ | async"
                          [colors]="pieChartColors">
                        </canvas>
                      </div>
                    </div>
                  </ng-template>
                  <div
                    *ngIf="
                      totalDiscountChartData &&
                      totalDiscountChartData.length <= 0 &&
                      !finTotalDiscountsLoader
                    "
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      You have offered no discounts in the selected period
                    </p>
                  </div>
                </ng-template>
              </div>
              <div class="card-footer">
                <div
                  fxLayout="row wrap"
                  class="m-t-40 predicted1 sa_chart_details_sec"
                  *ngIf="totalDiscountChartLabels.length > 0">
                  <div
                    fxFlex.gt-sm="50%"
                    fxFlex.gt-xs="50%"
                    fxFlex="100"
                    class="text-center">
                    <h3 class="m-0 value-num">
                      ${{ totalDiscountChartTotal | number: '1.0-0' }}
                    </h3>
                    <span class="value-text" *ngIf="currentText != ''">{{
                      currentText
                    }}</span>
                    <span class="value-text" *ngIf="currentText == ''"
                      >Current</span
                    >
                  </div>
                  <div
                    fxFlex.gt-sm="50%"
                    fxFlex.gt-xs="50%"
                    fxFlex="100"
                    class="text-center">
                    <h3 class="m-0 value-num">
                      ${{ totalDiscountChartTrendTotal | number: '1.0-0' }}
                    </h3>
                    <span class="value-text" *ngIf="trendText != ''">{{
                      trendText
                    }}</span>
                    <span class="value-text" *ngIf="trendText == ''"
                      >Previous</span
                    >
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
        <div
          fxFlex="calc(36% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="sa_flexbg predictor_ratio md_mrn custom_ngx_cw02">
          <mat-card class="sa_no_tabs_area">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center">
                <span
                  *ngIf="
                    showClinicByclinic;
                    else productionPerClinicianTemplate
                  "
                  >Production % Per Clinic</span
                >
                <ng-template #productionPerClinicianTemplate>
                  <span>Production % Per Clinician</span>
                </ng-template>
                <div class="info-icon-container">
                  <img
                    [tooltip]="charTips['30']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div class="card-body clinician-center-chart">
                <div
                  class="chart w-100"
                  *ngIf="
                    productionChartData.length > 0 &&
                    showInternal &&
                    !finProductionByClinicianError
                  ">
                  <div class="clinician-chart">
                    <canvas
                      class="productionPercentage"
                      #myCanvas
                      baseChart
                      [datasets]="[{ data: productionChartData }]"
                      [labels]="productionChartLabels"
                      [type]="productionChartType"
                      (chartHover)="chartHovered($event)"
                      (chartClick)="chartClicked($event)"
                      [options]="pieChartOptions"
                      [colors]="pieChartColors"></canvas>
                  </div>
                </div>
                <div
                  *ngIf="
                    productionChartData.length == 0 &&
                    !finProductionByClinicianLoader
                  "
                  class="no-data-placeholder">
                  <div class="sa_nodata_div"></div>
                  <p class="chart-placeholder-text">
                    You have no production in the selected period
                  </p>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <div
            *ngIf="
              finProductionByClinicianLoader && !finProductionByClinicianError
            "
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>
        </div>
      </div>
      <div
        *ngIf="isVisibleAccountGraphs"
        fxLayout="row wrap"
        fxLayoutGap="20px"
        fxLayoutGap.md="0px"
        fxLayoutGap.sm="0"
        fxLayoutGap.xs="0">
        <div
          fxFlex="calc(49% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="total_val sa_flexbg predictor_ratio md_mrn custom_ngx_cw03">
          <mat-card class="">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center">
                <div>
                  <span
                    class="predicted3Tool sa_inc_dec_arrows trend_arrow"
                    mat-icon-button
                    matTooltip="{{ trendText }} : ${{
                      productionTrendVal | number: '1.0-0'
                    }}"
                    *ngIf="trendText"
                    ><img
                      class="trend_ico"
                      src="../assets/images/trend_{{
                        productionTrendIcon
                      }}.png"
                  /></span>
                  Production Per Visit
                </div>
                <div class="info-icon-container">
                  <img
                    [tooltip]="charTips['32']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div class="card-body clinician-center-chart">
                <div
                  class="chart-per-visit"
                  *ngIf="
                    productionVal > 0 &&
                    !finProductionPerVisitLoader &&
                    !showBar
                  ">
                  <ngx-gauge
                    class="productionVisit"
                    [type]="gaugeType"
                    [value]="productionVal"
                    [thick]="gaugeThick"
                    [prepend]="gaugePrependText"
                    [foregroundColor]="foregroundColor"
                    [backgroundColor]="backgroundColor"
                    [cap]="cap"
                    [size]="size">
                  </ngx-gauge>
                </div>
                <canvas
                  *ngIf="
                    productionVal > 0 && !finProductionPerVisitLoader && showBar
                  "
                  #myCanvas
                  id="ProdPerVisit"
                  baseChart
                  [datasets]="ProdPerVisit"
                  [labels]="ProductionTrendLabels1"
                  [legend]="barChartLegend"
                  [type]="barChartType"
                  (chartHover)="chartHovered($event)"
                  [options]="barChartOptionsTrend"
                  [colors]="barChartColors"
                  (chartClick)="chartClicked($event)">
                </canvas>
                <div
                  *ngIf="productionVal <= 0 && !finProductionPerVisitLoader"
                  class="no-data-placeholder">
                  <div class="sa_nodata_div"></div>
                  <p class="chart-placeholder-text">
                    You have no production in the selected period
                  </p>
                </div>
              </div>
              <div class="card-footer">
                <div
                  fxLayout="row wrap"
                  class="m-t-40 predicted1 sa_chart_details_sec"
                  *ngIf="productionVal > 0">
                  <div
                    fxFlex.gt-sm="50%"
                    fxFlex.gt-xs="50%"
                    fxFlex="100"
                    class="text-center">
                    <h3 class="m-0 value-num">
                      ${{ productionVal | number: '1.0-0' }}
                    </h3>
                    <span class="value-text" *ngIf="currentText != ''">{{
                      currentText
                    }}</span>
                    <span class="value-text" *ngIf="currentText == ''"
                      >Current</span
                    >
                  </div>
                  <div
                    fxFlex.gt-sm="50%"
                    fxFlex.gt-xs="50%"
                    fxFlex="100"
                    class="text-center">
                    <h3 class="m-0 value-num">
                      ${{ productionTrendVal | number: '1.0-0' }}
                    </h3>
                    <span class="value-text" *ngIf="trendText != ''">{{
                      trendText
                    }}</span>
                    <span class="value-text" *ngIf="trendText == ''"
                      >Previous</span
                    >
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <div
            *ngIf="finProductionPerVisitLoader"
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>
        </div>
        <div
          fxFlex="calc(49% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="sa_flexbg predictor_ratio md_mrn last custom_ngx_cw07">
          <mat-card class="">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center total-dicount-title">
                <span
                  class="predicted3Tool sa_inc_dec_arrows trend_arrow"
                  mat-icon-button
                  matTooltip="{{ trendText }} : ${{
                    totalDiscountChartTrendTotal | number: '1.0-0'
                  }}"
                  *ngIf="trendText">
                  <img
                    class="trend_ico"
                    src="../assets/images/trend_{{
                      totalDiscountChartTrendIcon
                    }}.png" />
                </span>
                <span class="title"> Total Discounts </span>
                <div class="info-icon-container">
                  <img
                    [tooltip]="charTips['34']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div class="card-body chart-spacing">
                <div
                  *ngIf="isExact; else nonExactTemplate"
                  class="no-data-placeholder">
                  <div class="sa_nodata_div"></div>
                  <p class="chart-placeholder-text">Coming Soon...</p>
                </div>
                <ng-template #nonExactTemplate>
                  <div
                    class="chart w-100"
                    *ngIf="
                      totalDiscountChartData &&
                      totalDiscountChartData.length > 0 &&
                      showInternal &&
                      !showClinicBar
                    ">
                    <div class="clinician-chart">
                      <canvas
                        class="totalDiscount"
                        #myCanvas
                        baseChart
                        [datasets]="[{ data: totalDiscountChartData }]"
                        [labels]="totalDiscountChartLabels"
                        [type]="totalDiscountChartType"
                        (chartHover)="chartHovered($event)"
                        (chartClick)="chartClicked($event)"
                        [legend]="false"
                        [options]="pieChartOptions2"
                        [plugins]="totalDiscountPluginObservable$ | async"
                        [colors]="pieChartColors">
                      </canvas>
                    </div>
                  </div>
                  <div
                    class="chart w-100"
                    *ngIf="
                      totalDiscountChartData &&
                      totalDiscountChartData.length > 0 &&
                      showInternal &&
                      showClinicBar
                    ">
                    <div class="clinician-chart">
                      <canvas
                        class="totalDiscount"
                        #myCanvas
                        baseChart
                        [datasets]="[{ data: totalDiscountChartClinicsData }]"
                        [labels]="totalDiscountChartLabelsClinics"
                        [type]="totalDiscountChartType"
                        (chartHover)="chartHovered($event)"
                        (chartClick)="chartClicked($event)"
                        [legend]="true"
                        [options]="pieChartOptions2"
                        [plugins]="totalDiscountPluginObservable$ | async"
                        [colors]="pieChartColors">
                      </canvas>
                    </div>
                  </div>
                  <div
                    *ngIf="
                      totalDiscountChartData &&
                      totalDiscountChartData.length <= 0 &&
                      !finTotalDiscountsLoader
                    "
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      You have offered no discounts in the selected period
                    </p>
                  </div>
                </ng-template>
              </div>
              <div class="card-footer" *ngIf="!isExact">
                <div
                  fxLayout="row wrap"
                  class="m-t-40 predicted1 sa_chart_details_sec"
                  *ngIf="totalDiscountChartLabels.length > 0">
                  <div
                    fxFlex.gt-sm="50%"
                    fxFlex.gt-xs="50%"
                    fxFlex="100"
                    class="text-center">
                    <h3 class="m-0 value-num">
                      ${{ totalDiscountChartTotal | number: '1.0-0' }}
                    </h3>
                    <span class="value-text" *ngIf="currentText != ''">{{
                      currentText
                    }}</span>
                    <span class="value-text" *ngIf="currentText == ''"
                      >Current</span
                    >
                  </div>
                  <div
                    fxFlex.gt-sm="50%"
                    fxFlex.gt-xs="50%"
                    fxFlex="100"
                    class="text-center">
                    <h3 class="m-0 value-num">
                      ${{ totalDiscountChartTrendTotal | number: '1.0-0' }}
                    </h3>
                    <span class="value-text" *ngIf="trendText != ''">{{
                      trendText
                    }}</span>
                    <span class="value-text" *ngIf="trendText == ''"
                      >Previous</span
                    >
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <div
            *ngIf="finTotalDiscountsLoader"
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>
        </div>
      </div>
      <div
        fxLayout="row wrap"
        fxLayoutGap="20px"
        fxLayoutGap.md="0"
        fxLayoutGap.sm="0"
        fxLayoutGap.xs="0">
        <div
          fxFlex="calc(100% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="sa_flexbg predictor_ratio total_val md_mrn custom_ngx_cw05">
          <mat-card class="">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center"
                >Production & Collection
                <div class="info-icon-container">
                  <img
                    [tooltip]="charTips['33']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div class="card-body">
                <div fxLayout="row wrap" fxLayoutGap="20px grid">
                  <div
                    class="ngx-charts-fix"
                    fxFlex.lg="55"
                    fxFlex.xl="55"
                    fxFlex.md="100"
                    fxFlex.sm="100"
                    fxFlex.xs="100"
                    fxFlex="60">
                    <div
                      class="chart-prod-coll"
                      *ngIf="
                        totalProductionCollectionMax > 0 &&
                        !finTotalProductionLoader &&
                        !isAllClinic
                      ">
                      <canvas
                        #myCanvas2
                        baseChart
                        [datasets]="totalProductionCollection1"
                        [labels]="totalProductionCollectionLabel1"
                        [options]="labelBarOptionsTC"
                        [legend]="false"
                        [type]="stackedChartType"
                        (chartHover)="chartHovered($event)"
                        (chartClick)="chartClicked($event)"></canvas>
                    </div>
                    <div
                      class="chart-prod-coll"
                      *ngIf="
                        totalProductionCollectionMax > 0 &&
                        !finTotalProductionLoader &&
                        isAllClinic
                      ">
                      <canvas
                        #myCanvas2
                        baseChart
                        [datasets]="totalProductionCollection1"
                        [labels]="totalProductionCollectionLabel1"
                        [options]="labelBarOptionsMultiTC"
                        [legend]="true"
                        [type]="stackedChartType"
                        (chartHover)="chartHovered($event)"
                        (chartClick)="chartClicked($event)"></canvas>
                    </div>
                    <div
                      *ngIf="
                        totalProductionCollectionMax <= 0 &&
                        !finTotalProductionLoader
                      "
                      class="no-data-placeholder">
                      <div class="sa_nodata_div"></div>
                      <p class="chart-placeholder-text">
                        You have no production in the selected period
                      </p>
                    </div>
                  </div>

                  <div
                    fxFlexAlign="center"
                    fxFlex.lg="45"
                    fxFlex.xl="45"
                    fxFlex.md="100"
                    fxFlex.sm="100"
                    fxFlex.xs="100"
                    fxFlex="40">
                    <div
                      fxLayout="row wrap"
                      fxLayoutGap="30px grid"
                      class="predicted1 sa_chart_details_sec production_collection"
                      *ngIf="totalProductionCollectionLabel1.length > 0">
                      <div
                        fxFlex.gt-sm="50%"
                        fxFlex.gt-xs="50%"
                        fxFlex="100"
                        class="production">
                        <h4 class="m-0 no-boldText"><b>Production</b></h4>
                        <div
                          fxLayout="row wrap"
                          class="m-t-30"
                          *ngIf="totalProductionCollectionLabel1.length > 0">
                          <div
                            fxFlex.gt-sm="100%"
                            fxFlex.gt-xs="100%"
                            fxFlex="100">
                            <div class="production-value">
                              <h3 class="m-0 value-num">
                                $ {{ totalProductionVal | number: '1.0-0' }}
                              </h3>
                              <span
                                [ngClass]="
                                  isAllClinic ? 'value-text' : 'value-text pink'
                                "
                                *ngIf="currentText != ''"
                                >{{ currentText }}</span
                              >
                              <span class="value-text" *ngIf="currentText == ''"
                                >Current</span
                              >
                            </div>
                            <div class="production-value">
                              <h3 class="m-0 value-num">
                                $
                                {{ totalProductionTrendVal | number: '1.0-0' }}
                              </h3>
                              <span
                                class="value-text"
                                *ngIf="trendText != ''"
                                >{{ trendText }}</span
                              >
                              <span class="value-text" *ngIf="trendText == ''"
                                >Previous</span
                              >
                            </div>
                          </div>
                        </div>
                      </div>
                      <div
                        fxFlex.gt-sm="50%"
                        fxFlex.gt-xs="50%"
                        fxFlex="100"
                        class="collection">
                        <h4 class="m-0 no-boldText">
                          <b
                            >Collection
                            <!--({{collectionPercentageC| number:'1.0-0'}}%)-->
                          </b>
                        </h4>
                        <div
                          fxLayout="row wrap"
                          class="m-t-30"
                          *ngIf="totalProductionCollectionLabel1.length > 0">
                          <div
                            fxFlex.gt-sm="100%"
                            fxFlex.gt-xs="100%"
                            fxFlex="100">
                            <div class="collection-value">
                              <h3 class="m-0 value-num">
                                $ {{ collectionVal | number: '1.0-0' }}
                              </h3>
                              <span
                                [ngClass]="
                                  isAllClinic
                                    ? 'value-text'
                                    : 'value-text green'
                                "
                                *ngIf="currentText != ''"
                                >{{ currentText }}</span
                              >
                              <span class="value-text" *ngIf="currentText == ''"
                                >Current</span
                              >
                            </div>
                            <div class="collection-value">
                              <h3 class="m-0 value-num">
                                $ {{ collectionTrendVal | number: '1.0-0' }}
                              </h3>
                              <span
                                class="value-text"
                                *ngIf="trendText != ''"
                                >{{ trendText }}</span
                              >
                              <span class="value-text" *ngIf="trendText == ''"
                                >Previous</span
                              >
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <div
            *ngIf="finTotalProductionLoader"
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>
        </div>
      </div>
    </div>
    <div class="trendMode" [style.display]="'none'">
      <div
        fxLayout="row wrap"
        fxLayoutGap="20px"
        fxLayoutGap.md="0"
        fxLayoutGap.sm="0"
        fxLayoutGap.xs="0">
        <div
          fxFlex="calc(49% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="sa_flexbg predictor_ratio md_mrn">
          <mat-card class="">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center"
                >{{ profitChartTitles[netProfitDisplayVal - 1] }}
                <div class="info-icon-container">
                  <img
                    *ngIf="netProfitDisplayVal == 1"
                    [tooltip]="charTips['31']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                  <img
                    *ngIf="netProfitDisplayVal == 2"
                    [tooltip]="charTips['26']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                  <img
                    *ngIf="netProfitDisplayVal == 3"
                    [tooltip]="charTips['27']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                  <img
                    *ngIf="netProfitDisplayVal == 4"
                    [tooltip]="charTips['33']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div class="card-body">
                <div *ngIf="isVisibleAccountGraphs" class="sa_tabs_main_sec">
                  <div fxLayout="row wrap" fxLayoutGap="20px grid">
                    <div
                      fxFlex.gt-sm="25%"
                      fxFlex.gt-xs="25%"
                      fxFlex="100"
                      class="text-center">
                      <small
                        class="sa_tab_btn profit_btn netProfit1 active"
                        (click)="displayProfit('1')"
                        >Production</small
                      >
                    </div>
                    <div
                      fxFlex.gt-sm="25%"
                      fxFlex.gt-xs="25%"
                      fxFlex="100"
                      class="text-center">
                      <small
                        class="sa_tab_btn profit_btn netProfit4"
                        (click)="displayProfit('4')"
                        >Collection</small
                      >
                    </div>
                    <div
                      fxFlex.gt-sm="25%"
                      fxFlex.gt-xs="25%"
                      fxFlex="100"
                      class="text-center">
                      <small
                        class="sa_tab_btn profit_btn netProfit2"
                        (click)="displayProfit('2')"
                        >Net Profit</small
                      >
                    </div>
                    <div
                      fxFlex.gt-sm="25%"
                      fxFlex.gt-xs="25%"
                      fxFlex="100"
                      class="text-center">
                      <small
                        class="sa_tab_btn profit_btn netProfit3"
                        (click)="displayProfit('3')"
                        >Net Profit %
                      </small>
                    </div>
                  </div>
                </div>
                <div class="chart-clinician">
                  <!-- *****************-->
                  <!-- PRODUCTION TREND -->
                  <!-- **************** -->

                  <canvas
                    *ngIf="
                      netProfitDisplayVal == 1 &&
                      totalProductionChartTrendLabels.length > 0 &&
                      !finTotalProductionTrendLoader &&
                      !showProdByclinic
                    "
                    class="profit1 net_profit"
                    baseChart
                    [datasets]="totalProductionChartTrend"
                    [labels]="totalProductionChartTrendLabels"
                    [options]="labelBarOptionsSingleValue"
                    [legend]="false"
                    [type]="lineChartType"
                    (chartHover)="chartHovered($event)"
                    [colors]="stackedChartColorsBar"
                    (chartClick)="chartClicked($event)">
                  </canvas>
                  <canvas
                    *ngIf="!finTotalProductionTrendLoader && showProdByclinic"
                    class="profit1 net_profit"
                    baseChart
                    [datasets]="totalProductionChartTrendMulti"
                    [labels]="totalProductionChartTrendLabelsMulti"
                    [options]="stackedChartOptionsDiscount"
                    [legend]="true"
                    [type]="stackedChartType"
                    (chartHover)="chartHovered($event)"
                    (chartClick)="chartClicked($event)">
                  </canvas>
                  <div
                    *ngIf="
                      netProfitDisplayVal == 1 &&
                      totalProductionChartTrendLabels.length == 0 &&
                      !finTotalProductionTrendLoader
                    "
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      You have no production in the selected period
                    </p>
                  </div>

                  <!-- *****************-->
                  <!-- NET PROFIT TREND -->
                  <!-- **************** -->

                  <canvas
                    *ngIf="isSingleNetProfitTrendChartVisible"
                    class="profit2 net_profit"
                    baseChart
                    [datasets]="netProfitChartTrend"
                    [labels]="netProfitPmsChartTrendLabels"
                    [options]="labelBarOptionsSingleValue"
                    [legend]="false"
                    [type]="lineChartType"
                    (chartHover)="chartHovered($event)"
                    [colors]="stackedChartColorsBar"
                    (chartClick)="chartClicked($event)">
                  </canvas>

                  <div
                    *ngIf="isXeroOrMyobDisconnected"
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      Please connect to Xero/MYOB to display this chart
                    </p>
                  </div>
                  <div
                    *ngIf="hasNoSingleOrMultipleNetProfitPercentChartTrend"
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      You have no net profit in the selected period
                    </p>
                  </div>
                  <canvas
                    *ngIf="isMultipleNetProfitTrendChartVisible"
                    class="profit1 net_profit"
                    baseChart
                    [datasets]="netProfitPmsChartTrendMulti"
                    [labels]="netProfitPmsChartTrendLabels"
                    [options]="netProfitTrendMultiChartOptions"
                    [legend]="false"
                    [type]="lineChartType"
                    [colors]="stackedChartColorsBar"
                    (chartHover)="chartHovered($event)"
                    (chartClick)="chartClicked($event)">
                  </canvas>

                  <!-- ********************-->
                  <!-- NET PROFIT % TREND  -->
                  <!-- ******************* -->

                  <canvas
                    *ngIf="
                      (xeroConnect || myobConnect) &&
                      netProfitDisplayVal == 3 &&
                      netProfitPercentChartTrendLabels.length > 0
                    "
                    #myCanvas2
                    class="profit3 net_profit"
                    baseChart
                    [datasets]="netProfitPercentChartTrend"
                    [labels]="netProfitPercentChartTrendLabels"
                    [options]="labelBarOptionsSingleValue1"
                    [legend]="false"
                    [type]="lineChartType"
                    (chartHover)="chartHovered($event)"
                    [colors]="stackedChartColorsBar"
                    (chartClick)="chartClicked($event)">
                  </canvas>
                  <div
                    *ngIf="
                      (xeroConnect || myobConnect) &&
                      netProfitDisplayVal == 3 &&
                      netProfitPercentChartTrendLabels.length == 0 &&
                      !finNetProfitPercentTrendLoader
                    "
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      You have no net profit in the selected period
                    </p>
                  </div>
                  <div
                    *ngIf="
                      !(
                        xeroConnect ||
                        myobConnect ||
                        multipleClinicsSelected
                      ) && netProfitDisplayVal == 3
                    "
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      Please connect to Xero/MYOB to display this chart
                    </p>
                  </div>

                  <!-- *****************-->
                  <!-- COLLECTION TREND -->
                  <!-- **************** -->

                  <canvas
                    *ngIf="
                      !finCollectionTrendLoader &&
                        netProfitDisplayVal == 4 &&
                        collectionChartTrendLabels.length > 0!;
                      isAllClinic
                    "
                    class="profit1 net_profit"
                    baseChart
                    [datasets]="collectionChartTrend"
                    [labels]="collectionChartTrendLabels"
                    [options]="labelBarOptionsSingleValue"
                    [legend]="false"
                    [type]="lineChartType"
                    (chartHover)="chartHovered($event)"
                    [colors]="stackedChartColorsBar"
                    (chartClick)="chartClicked($event)">
                  </canvas>
                  <canvas
                    *ngIf="
                      !finCollectionTrendLoader &&
                      isAllClinic &&
                      collectionChartTrendMultiLabels.length > 0 &&
                      netProfitDisplayVal == 4
                    "
                    class="profit4 net_profit"
                    baseChart
                    [datasets]="collectionChartTrendMultiData"
                    [labels]="collectionChartTrendMultiLabels"
                    [options]="stackedChartOptionsDiscount"
                    [legend]="true"
                    [type]="stackedChartType"
                    (chartHover)="chartHovered($event)"
                    (chartClick)="chartClicked($event)">
                  </canvas>
                  <div
                    *ngIf="
                      netProfitDisplayVal == 4 &&
                      (collectionChartTrendMultiLabels.length == 0 ||
                        collectionChartTrendLabels.length == 0) &&
                      !finCollectionTrendLoader
                    "
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      You have no collection in the selected period
                    </p>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <div
            *ngIf="finNetProfitTrendLoader && netProfitDisplayVal == 1"
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>
          <div
            *ngIf="finNetProfitPercentTrendLoader && netProfitDisplayVal == 2"
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>

          <div
            *ngIf="finNetProfitPMSTrendLoader && netProfitDisplayVal == 3"
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>

          <div
            *ngIf="finCollectionTrendLoader && netProfitDisplayVal == 4"
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>
        </div>

        <div
          fxFlex="calc(49% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="sa_flexbg predictor_ratio md_mrn">
          <mat-card class="">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center"
                >Production Per Visit
                <div class="info-icon-container">
                  <img
                    [tooltip]="charTips['32']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div class="card-body">
                <div class="chart-prod-pr-visit">
                  <canvas
                    #myCanvas2
                    class="trendproductionVisit"
                    *ngIf="productionVisitChartTrendLabels.length > 0"
                    baseChart
                    [datasets]="productionVisitChartTrend"
                    [labels]="productionVisitChartTrendLabels"
                    [options]="labelBarOptionsSingleValue"
                    [legend]="false"
                    [type]="lineChartType"
                    (chartHover)="chartHovered($event)"
                    [colors]="stackedChartColorsBar"
                    (chartClick)="chartClicked($event)"></canvas>
                  <div
                    *ngIf="
                      productionVisitChartTrendLabels.length == 0 &&
                      !finProductionPerVisitTrendLoader
                    "
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      You have no production in the selected period
                    </p>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <div
            *ngIf="finProductionPerVisitTrendLoader"
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>
        </div>
      </div>

      <div
        fxLayout="row wrap"
        fxLayoutGap="20px"
        fxLayoutGap.md="0"
        fxLayoutGap.sm="0"
        fxLayoutGap.xs="0">
        <div
          *ngIf="isVisibleAccountGraphs"
          fxFlex="calc(49% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="sa_flexbg md_mrn expenses_card">
          <mat-card class="chart_card">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center"
                >Expenses
                <div class="sa_box_title_right_buttons"></div>
                <div class="info-icon-container">
                  <img
                    [tooltip]="charTips['28']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div
                *ngIf="
                  (xeroConnect || myobConnect) &&
                  expensestrendstats &&
                  !expensesChartTrendError
                "
                class="card-body sa_chart_summary_flip_main">
                <div class="sa_chart_summary_flip">
                  <div class="chart sa_chart_flip sa_flip">
                    <div class="chart-clinician">
                      <canvas
                        #myCanvas2
                        class="trendProductionPercentage"
                        *ngIf="
                          !!expensesChartTrendLabels &&
                          expensesChartTrendLabels.length > 0
                        "
                        baseChart
                        [datasets]="expensesChartTrend"
                        [labels]="expensesChartTrendLabels"
                        [options]="stackedChartOptions"
                        [legend]="false"
                        [type]="stackedChartType"
                        (chartHover)="chartHovered($event)"
                        (chartClick)="chartClicked($event)">
                      </canvas>

                      <div
                        *ngIf="
                          !!expensesChartTrendLabels &&
                          expensesChartTrendLabels.length == 0
                        "
                        class="no-data-placeholder">
                        <div class="sa_nodata_div"></div>
                        <p class="chart-placeholder-text">
                          No expenses found for the selected period
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div
                *ngIf="
                  (xeroConnect || myobConnect) &&
                  !(expensestrendstats || expensesChartTrendError)
                "
                class="loader_container loader_container_middle">
                <img class="loader_ico" src="../assets/images/720.gif" />
                <div class="loader-text">Calculating...</div>
              </div>
              <div
                *ngIf="!(xeroConnect || myobConnect)"
                class="no-data-placeholder">
                <div class="sa_nodata_div"></div>
                <p class="chart-placeholder-text">
                  Please connect to Xero/MYOB to display this chart
                </p>
              </div>
            </mat-card-content>
          </mat-card>
        </div>

        <div
          *ngIf="!isVisibleAccountGraphs"
          fxFlex="calc(49% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="sa_flexbg md_mrn expenses_card">
          <mat-card class="">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center">
                <span *ngIf="showClinic; else productionPerClinician"
                  >Production % Per Clinic</span
                >
                <ng-template #productionPerClinician>
                  <span>Production % Per Clinician</span>
                </ng-template>
                <div class="info-icon-container">
                  <img
                    [tooltip]="charTips['30']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div class="card-body">
                <div class="chart-clinician">
                  <canvas
                    #myCanvas2
                    class="trendProductionPercentage"
                    baseChart
                    *ngIf="
                      productionChartTrendLabels &&
                      productionChartTrendLabels.length > 0 &&
                      !finProductionByClinicianTrendLoader &&
                      !finProductionByClinicianTrendError
                    "
                    [datasets]="productionChartTrend"
                    [labels]="productionChartTrendLabels"
                    [options]="labelBarPercentOptionsStacked"
                    [legend]="false"
                    [type]="stackedChartType"
                    (chartHover)="chartHovered($event)"
                    (chartClick)="chartClicked($event)">
                  </canvas>
                  <div
                    *ngIf="
                      productionChartTrendLabels &&
                      productionChartTrendLabels.length == 0 &&
                      !finProductionByClinicianTrendLoader
                    "
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      You have no production in the selected period
                    </p>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <div
            *ngIf="
              finProductionByClinicianTrendLoader &&
              !finProductionByClinicianTrendError
            "
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>
        </div>

        <div
          fxFlex="calc(49% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="sa_flexbg predictor_ratio md_mrn">
          <mat-card class="">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center"
                >Total Discounts
                <div class="info-icon-container">
                  <img
                    [tooltip]="charTips['34']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div class="card-body">
                <!-- <div
                  *ngIf="isExact; else nonExactTemplate"
                  class="no-data-placeholder"
                >
                  <div class="sa_nodata_div"></div>
                  <p class="chart-placeholder-text">Coming Soon...</p>
                </div> -->
                <!-- <ng-template> -->
                <div class="chart-clinician">
                  <canvas
                    #myCanvas2
                    class="trendtotalDiscount"
                    *ngIf="
                      discountsChartTrend1 &&
                      discountsChartTrend1.length > 0 &&
                      !finTotalDiscountsTrendLoader &&
                      !showByclinic
                    "
                    baseChart
                    [datasets]="discountsChartTrend"
                    [labels]="discountsChartTrendLabels"
                    [options]="labelBarOptionsSingleValue"
                    [legend]="false"
                    [type]="lineChartType"
                    (chartHover)="chartHovered($event)"
                    [colors]="stackedChartColorsBar"
                    (chartClick)="chartClicked($event)">
                  </canvas>
                  <canvas
                    #myCanvas2
                    class="trendtotalDiscount"
                    *ngIf="!finTotalDiscountsTrendLoader && showByclinic"
                    baseChart
                    [datasets]="discountsChartTrendMulti"
                    [labels]="discountsChartTrendMultiLabels1"
                    [options]="stackedChartOptionsDiscount"
                    [legend]="true"
                    [type]="stackedChartType"
                    (chartHover)="chartHovered($event)"
                    (chartClick)="chartClicked($event)">
                  </canvas>
                  <div
                    *ngIf="
                      discountsChartTrend1 &&
                      discountsChartTrend1.length == 0 &&
                      !finTotalDiscountsTrendLoader
                    "
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      You have offered no discounts in the selected period
                    </p>
                  </div>
                </div>
                <!-- </ng-template> -->
              </div>
            </mat-card-content>
          </mat-card>
          <div
            *ngIf="finTotalDiscountsTrendLoader"
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>
        </div>
      </div>
      <div
        fxLayout="row wrap"
        fxLayoutGap="20px"
        fxLayoutGap.md="0"
        fxLayoutGap.sm="0"
        fxLayoutGap.xs="0">
        <div
          fxFlex="calc(49% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="sa_flexbg predictor_ratio md_mrn">
          <mat-card class="">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center"
                >Production & Collection
                <div class="info-icon-container">
                  <img
                    [tooltip]="charTips['33']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div class="card-body">
                <div class="chart-clinician">
                  <canvas
                    class="trendtotalProduction"
                    *ngIf="
                      totalProductionCollectionLabel &&
                      totalProductionCollectionLabel.length > 0 &&
                      !finCollectionTrendLoader &&
                      !finTotalProductionTrendLoader
                    "
                    baseChart
                    [datasets]="totalProductionCollection"
                    [labels]="totalProductionCollectionLabel"
                    [options]="labelBarOptions"
                    [legend]="true"
                    [type]="stackedChartType"
                    (chartHover)="chartHovered($event)"
                    [colors]="barChartColors"
                    (chartClick)="chartClicked($event)">
                  </canvas>
                  <div
                    *ngIf="
                      totalProductionCollectionLabel &&
                      totalProductionCollectionLabel.length <= 0 &&
                      !finCollectionTrendLoader &&
                      !finTotalProductionTrendLoader
                    "
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      You have no production in the selected period
                    </p>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <div
            *ngIf="finCollectionTrendLoader || finTotalProductionTrendLoader"
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>
        </div>

        <div
          *ngIf="isVisibleAccountGraphs"
          fxFlex="calc(49% - 10px)"
          fxFlex.md="100"
          fxFlex.sm="100"
          fxFlex.xs="100"
          class="sa_flexbg predictor_ratio last md_mrn last">
          <mat-card class="">
            <mat-card-content class="sa_matcard_content">
              <mat-card-title class="text-center">
                <span *ngIf="showClinic; else productionPerClinician"
                  >Production % Per Clinic</span
                >
                <ng-template #productionPerClinician>
                  <span>Production % Per Clinician</span>
                </ng-template>
                <div class="info-icon-container">
                  <img
                    [tooltip]="charTips['30']"
                    src="../assets/images/info-icon.png"
                    alt="info-icon"
                    class="info-icon" />
                </div>
              </mat-card-title>
              <div class="card-body">
                <div class="chart-clinician">
                  <canvas
                    #myCanvas2
                    class="trendProductionPercentage"
                    baseChart
                    *ngIf="
                      productionChartTrendLabels &&
                      productionChartTrendLabels.length > 0 &&
                      !finProductionByClinicianTrendLoader &&
                      !finProductionByClinicianTrendError
                    "
                    [datasets]="productionChartTrend"
                    [labels]="productionChartTrendLabels"
                    [options]="labelBarPercentOptionsStacked"
                    [legend]="true"
                    [type]="stackedChartType"
                    (chartHover)="chartHovered($event)"
                    (chartClick)="chartClicked($event)">
                  </canvas>
                  <div
                    *ngIf="
                      productionChartTrendLabels &&
                      productionChartTrendLabels.length == 0 &&
                      !finProductionByClinicianTrendLoader
                    "
                    class="no-data-placeholder">
                    <div class="sa_nodata_div"></div>
                    <p class="chart-placeholder-text">
                      You have no production in the selected period
                    </p>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <div
            *ngIf="
              finProductionByClinicianTrendLoader &&
              !finProductionByClinicianTrendError
            "
            class="loader_container loader_container_middle">
            <img class="loader_ico" src="../assets/images/720.gif" />
            <div class="loader-text">Calculating...</div>
          </div>
        </div>
      </div>
    </div>
    <!-- Column-->
  </div>
</div>
<canvas
  #myCanvas2
  baseChart
  [style.display]="'none'"
  [datasets]="chartData1"
  [labels]="chartLabels1"
  [type]="productionChartType"></canvas>
<canvas
  #myCanvas
  baseChart
  [style.display]="'none'"
  [datasets]="chartData1"
  [labels]="chartLabels1"
  [type]="productionChartType"></canvas>

<ngx-smart-modal #show_more identifier="show_more">
  <h4 class="mt-0">Select Expenses</h4>
  <div
    fxLayout="row wrap"
    class="row_sc"
    fxLayoutGap="20px"
    fxLayoutGap.md="20px"
    fxLayoutGap.sm="0"
    fxLayoutGap.xs="0">
    <div
      fxFlex="calc(50% - 10px)"
      fxFlex.md="calc(50% - 10px)"
      fxFlex.sm="50"
      fxFlex.xs="50"
      class="SelectCategories sa_flexbg referral_clinicians">
      <h5 class="mt-0">Selected Expenses</h5>
      <ul *ngIf="unSelectedData.length >= 0" class="list-categories">
        <li *ngFor="let category of selectedData; let i = index">
          <span (click)="removeFromSelected(i)"
            ><i class="fa fa-times"></i
          ></span>
          <span>{{ category.name.split('--')[0] }}</span>
        </li>
      </ul>
    </div>
    <div
      fxFlex="calc(50% - 10px)"
      fxFlex.md="calc(50% - 10px)"
      fxFlex.sm="50"
      fxFlex.xs="50"
      class="SelectCategories sa_flexbg referral_clinicians">
      <h5 class="mt-0">Other Expenses</h5>
      <ul *ngIf="unSelectedData.length >= 0" class="list-categories">
        <li *ngFor="let category of unSelectedData; let i = index">
          <span (click)="addToSelected(i)"><i class="fa fa-plus"></i></span>
          <span>{{ category.name.split('--')[0] }}</span>
        </li>
      </ul>
    </div>
  </div>
  <br />
  <button
    class="mat-raised-button mat-dc float-right"
    mat-raised-button
    (click)="refreshFinanceChart()">
    Ok
  </button>
  <button
    (click)="show_more.close()"
    class="mat-raised-button mat-dc close_modal">
    Close
  </button>
</ngx-smart-modal>
