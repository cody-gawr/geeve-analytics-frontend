<!-- ============================================================== -->
<!-- Card Grid-->
<!-- ============================================================== -->
<div fxLayout="row wrap">
    <div fxFlex.gt-sm="100" fxFlex="100">
        <mat-card>
            <mat-card-content>
               
                <mat-card-title> Patient Plan Details | {{mainpatientname | titlecase}}  <button class="sa-pull-right mat-raised-button sa-pull-right mat-gray" (click) = "goBack()">Back</button></mat-card-title>
               <!-- ============================================================== -->
                <!-- column -->
                <!-- ============================================================== -->
                <div fxLayout="row wrap">

                    <!-- Card column -->
                    <div fxFlex.gt-sm="100%" fxFlex="100" class="sa_mattabs_design sa_matforms_design">
                      
                            <mat-tab-group dynamicHeight>
                         
                        <!-- Plan Details tab -->
                              <mat-tab label="Plan Details">
                                    <div fxFlex.gt-sm="50%" fxFlex="50" class="sa_mattabs_design sa_matforms_design">
                                <form>                                
                                  <table>
                                      <tr>
                                          <th>Plan</th>
                                          <td>&nbsp;&nbsp;</td>
                                          <td>{{plan_name}}</td>
                                        </tr>
                                        <tr>
                                            <th>No. of Members</th>
                                            <td>&nbsp;&nbsp;</td>
                                            <td>{{total_subpatient}}</td>
                                          </tr>
                                          <tr>
                                            <th>Status</th>
                                            <td>&nbsp;&nbsp;</td>
                                            <td>{{patient_status}}</td>
                                          </tr>
                                           <tr>
                                            <th>Preventative Appointments</th>
                                            <td>&nbsp;&nbsp;</td>
                                            <td>{{total_subpatient}}</td>
                                          </tr>
                                          <tr>
                                            <th>Amount Paid</th>
                                            <td>&nbsp;&nbsp;</td>
                                            <td>$ {{patient_amount}}</td>
                                          </tr>
                                          <tr>
                                            <th>Plan Cost</th>
                                            <td>&nbsp;&nbsp;</td>
                                            <td>$ {{totalAmount}}</td>
                                          </tr>
                                          <tr>
                                            <th>Payment Period</th>
                                            <td>&nbsp;&nbsp;</td>
                                            <td>{{planLength}}</td>
                                          </tr>
                                    <tr>
                                      <th>&nbsp;</th>
                                     </tr>
                                   </table>
                                </form>

                                <h3>Plan Members</h3>
                         <ngx-datatable #table class='material responsive-datatable' [columns]="columns" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
                                  [rowHeight]="'auto'" [limit]="10" [rows]='rows'>
                            <ngx-datatable-column prop="sub_patients_name" name="sub_patients_name">
                               <ng-template let-column="column" ngx-datatable-header-template>
                              <span>Name</span>
                            </ng-template>
                              <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                                <span >
                                  {{value}}
                                </span>
                                    </ng-template>
                            </ngx-datatable-column>
                      
                             <ngx-datatable-column prop="sub_patients_dob" name="sub_patients_dob">
                               <ng-template let-column="column" ngx-datatable-header-template>
                              <span>Date of Birth</span>
                            </ng-template>
                              <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                                <span >
                                  {{value| date:'dd-mm-y'}}
                                </span>
                               
                              </ng-template>
                            </ngx-datatable-column>
                      
                            <ngx-datatable-column prop="sub_patients_gender" name="sub_patients_gender">
                              <ng-template let-column="column" ngx-datatable-header-template>
                             <span>Gender</span>
                           </ng-template>
                             <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                               <span >
                                 {{value}}
                               </span>
                              
                             </ng-template>
                           </ngx-datatable-column>                        
                          </ngx-datatable>
                        </div>
                            </mat-tab>
                             <mat-tab label="Patient Details">
                                    <div fxFlex.gt-sm="50%" fxFlex="50" class="sa_mattabs_design sa_matforms_design">
                                <h1 mat-dialog-title>Update Patient Details</h1>
                        <div mat-dialog-content>
                        <form [formGroup]="formSettings"  (ngSubmit)="onSubmitBasic()">
                        <mat-form-field>

                          <input matInput tabindex="1" [(ngModel)]="data.patient_name" placeholder="Patient Name"  class="form-control-dialog" required="true">
                         
                        </mat-form-field>
                       
                        <mat-form-field>
                          <input matInput tabindex="1" [(ngModel)]="data.patient_address" placeholder="Patient Address" class="form-control-dialog" required="true">
                        </mat-form-field>

                        <mat-form-field>
                            <input matInput tabindex="1" type="date" [(ngModel)]="data.patient_dob" placeholder="Patient Dob" class="form-control-dialog" required="true">
                          </mat-form-field>

                          <mat-form-field>
                            <input matInput tabindex="1" type="number" min="0" [(ngModel)]="data.patient_age" placeholder="Patient Age" class="form-control-dialog" required="true">
                          </mat-form-field>

                          <mat-form-field>
                            <mat-label>Gender</mat-label> 
                            <mat-select name ="value" tabindex="1" [(ngModel)]= "data.patient_gender"  class="form-control-dialog" required="true">
                              <mat-option value="MALE">MALE</mat-option>
                              <mat-option value="FEMALE">FEMALE</mat-option>
                            </mat-select>
                          </mat-form-field>


                          <mat-form-field>
                              <input matInput tabindex="1" type="number" min="0" [(ngModel)]="data.patient_phone_no" placeholder="Phone Number" class="form-control-dialog" oninput="this.value = this.value.slice(0,10);" required="true">
                            </mat-form-field>


                          <mat-form-field>
                              <input matInput tabindex="1" type="number" min="0" [(ngModel)]="data.patient_home_phno" placeholder="Home Phone Number" class="form-control-dialog" oninput="this.value = this.value.slice(0,10);" required="true">
                           </mat-form-field>

                          <mat-form-field>
                            <mat-label>Status</mat-label> 
                            <mat-select name ="value" tabindex="1" [(ngModel)]= "data.patient_status"  class="form-control-dialog" required="true">
                              <mat-option value="ACTIVE">ACTIVE</mat-option>
                              <mat-option value="INACTIVE">INACTIVE</mat-option>
                            </mat-select>
                          </mat-form-field>

                      </div>
                      <div mat-dialog-actions>
                        <button mat-button (click)="update(data)" tabindex="2" class="mat-raised-button mat-dc">OK</button>
                        <button mat-button (click)="onNoClick()" tabindex="-1" class="mat-raised-button mat-gray">Cancel</button>
                      </div>
                    </form>
                        </div>
                            </mat-tab>
                    <!-- Payment History tab -->

                          <mat-tab label="Payment History">
                           <ngx-datatable #table class='material responsive-datatable' [columns]="columns" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
                                  [rowHeight]="'auto'" [limit]="10" [rows]='payment'>
                             <ngx-datatable-column prop="sr" name="sr">
                               <ng-template let-column="column" ngx-datatable-header-template>
                              <span>Id</span>
                            </ng-template>
                              <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                                <span>
                                  {{rowIndex + 1}}
                                </span>
                              </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column prop="customer_id" name="customer_id">
                               <ng-template let-column="column" ngx-datatable-header-template>
                              <span>Customer ID</span>
                            </ng-template>
                              <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                                <span >
                                  {{value}}
                                </span>
                                    </ng-template>
                            </ngx-datatable-column>

                            <ngx-datatable-column prop="subscr_id" name="subscr_id">
                              <ng-template let-column="column" ngx-datatable-header-template>
                             <span>Subscriber ID</span>
                           </ng-template>
                             <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                               <span >
                                 {{value}}
                               </span>
                                   </ng-template>
                           </ngx-datatable-column>

                             <ngx-datatable-column prop="invoice_date" name="invoice_date">
                               <ng-template let-column="column" ngx-datatable-header-template>
                              <span>Invoice Date</span>
                            </ng-template>
                              <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                                <span >
                                  {{value | date: 'dd-MM-yyyy'}}
                                </span>
                               
                              </ng-template>
                            </ngx-datatable-column>
                      
                            <ngx-datatable-column prop="payment_plan_name" name="payment_plan_name">
                              <ng-template let-column="column" ngx-datatable-header-template>
                             <span>Plan </span>
                           </ng-template>
                             <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                               <span >
                                 {{payment_plan_name}}
                               </span>
                              
                             </ng-template>
                           </ngx-datatable-column>


                            <ngx-datatable-column prop="amount" name="amount">
                              <ng-template let-column="column" ngx-datatable-header-template>
                             <span>Amount</span>
                           </ng-template>
                             <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                               <span >
                                 {{value}}
                               </span>
                              
                             </ng-template>
                           </ngx-datatable-column>
                      

                            <ngx-datatable-column prop="payment_status" name="payment_status">
                              <ng-template let-column="column" ngx-datatable-header-template>
                             <span>Payment Status</span>
                           </ng-template>
                             <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                               <span >
                                 {{value}}
                               </span>
                              
                             </ng-template>
                           </ngx-datatable-column>
                      
                        
                          </ngx-datatable>

                                </mat-tab>

                            </mat-tab-group>
                       </div>
                </div>

            </mat-card-content>
        </mat-card>
    </div>
</div>
 