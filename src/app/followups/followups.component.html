<input type="button" id="clinic_initiate" (click)="initiate_clinic()" [style.display]="'none'" />
<div class="sa_dashboard_inner_content morning-huddle side">
    <div class="morning-huddle-date topModel followuppage">
        <mat-icon (click)="setDate('subtract')" role="img"
            class="mat-icon notranslate sa_ico1 material-icons mat-icon-no-color selectLeft" aria-hidden="true">
            arrow_back_ios</mat-icon>{{ selectedMonthYear }}
        <mat-icon (click)="setDate('add')" role="img"
            class="mat-icon notranslate sa_ico1 material-icons mat-icon-no-color selectRight" aria-hidden="true">
            arrow_forward_ios</mat-icon>
    </div>

    <mat-tab-group [selectedIndex]="selectedTab">
        <!-- Patient Schedule Tab start -->
        <mat-tab label="Overdue Recalls">
            <div class="follow-up">
                <mat-card-title>
                    <div class="title-follow-up d-inline-block">
                        Overdue Recalls
                        <div class="info-icon-container">
                            <img [tooltip]="charTips['44']" src="../assets/images/info-icon.png" alt="info-icon"
                                class="info-icon" />
                        </div>
                    </div>

                    <div class="showComplete" *ngIf="followupOverDueRecall.length > 0">
                        <mat-checkbox name="status" [checked]="showCompleteOverdue"
                            (change)="updateToCompleteOR($event)">Show Complete</mat-checkbox>
                    </div>
                    <div class="chipSets" *ngIf="overdueRecallsScrps.length > 0">
                        <mat-chip-list class="example-chip">
                            <mat-chip [tooltip]="{title:chips.script_title, info: chips.script_text }"
                                (mouseover)="historyPosChips($event,chips.colour)" class="example-box"
                                *ngFor="let chips of overdueRecallsScrps" [color]="chips.colour">
                                <span class="chipText">{{chips.script_title}}</span>
                            </mat-chip>
                        </mat-chip-list>
                    </div>
                </mat-card-title>

                <div class="card-loading" *ngIf="recallLoadingLoading">
                    <img class="tableLoader" src="../../assets/images/logo-icon.gif" />
                </div>
                <div class="follow-ups-table table-responsive">
                    <table mat-table [dataSource]="followupOverDueRecallInCMP"
                        class="mat-elevation-z8 customWidth thick">
                        <!-- Name Column -->
                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef>Patient Name</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.patients.firstname }} {{ element.patients.surname }}
                            </td>
                        </ng-container>

                        <!-- Weight Column -->
                        <ng-container matColumnDef="phone">
                            <th mat-header-cell *matHeaderCellDef>Phone Number</th>
                            <td mat-cell *matCellDef="let element">
                                <div class="phone_align_center">
                                    <img src="../assets/images/follow-up-call.png" alt="follow-up-call" />
                                    <span class="phone_no" *ngIf="element.patients.mobile">{{
                                        formatPhoneNumber(element.patients.mobile) }}</span>
                                    <span class="phone_no"
                                        *ngIf="!element.patients.mobile && element.patients.phone_work">
                                        {{ formatPhoneNumber(element.patients.phone_work) }}
                                    </span>
                                    <span class="phone_no"
                                        *ngIf=" !element.patients.mobile && !element.patients.phone_work ">
                                        {{ formatPhoneNumber(element.patients.phone_home) }}
                                    </span>
                                </div>
                            </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="code">
                            <th mat-header-cell *matHeaderCellDef>Last Recall Date</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.original_appt_date | date: "MMM d, y":"timezone" }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="followup_date">
                            <th mat-header-cell *matHeaderCellDef>Follow-Up Date</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.followup_date | date: "MMM d, y":"timezone" }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="book">
                            <th mat-header-cell *matHeaderCellDef>Notes</th>
                            <td mat-cell *matCellDef="let element">
                                <span (mouseover)="historyPos($event)" class="info-icon-container tick historyTip">
                                    <i [tooltip]="{
                      title: !element.notes ? 'Add Notes' : 'Edit Notes'
                    }" [ngClass]="!element.notes ? 'red' : 'green'" class="fas fa-book notes" (click)="
                      openNotes(
                        element.notes,
                        element.patient_id,
                        element.original_appt_date,
                        element.followup_date,
                        'recall-overdue'
                      )
                    "></i>
                                </span>
                                <div class="historyTip history">
                                    <i (mouseover)="historyPos($event)" [tooltip]="formatHistory(element.history)"
                                        class="fa fa-history" *ngIf="element.history.length > 0"></i>
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="note">
                            <th mat-header-cell *matHeaderCellDef>Status</th>
                            <td mat-cell *matCellDef="let element">
                                <mat-form-field floatLabel="never" class="setPreviousDay">
                                    <mat-select placeholder="Select Status" [(value)]="element.status" id="setNote"
                                        (selectionChange)="
                      updateStatus(
                        $event.value,
                        element.patient_id,
                        element.original_appt_date,
                        element.patients.clinic_id,
                        element.patients.firstname,
                        element.patients.surname,
                        element.original_appt_date,
                        element.followup_date,
                        'recall-overdue',
                        nextBussinessDay
                      )
                    ">
                                        <mat-option value="">Select Status</mat-option>
                                        <mat-option value="Booked">Booked</mat-option>
                                        <mat-option value="Already booked">Already booked</mat-option>
                                        <mat-option value="Didn't want to book">Didn't want to book</mat-option>
                                        <mat-option value="Ineligible">Ineligible</mat-option>
                                        <mat-option value="Can't be reached">Can't be reached</mat-option>
                                        <mat-option value="Can't be reached - left voicemail">Can't be reached - left
                                            voicemail</mat-option>
                                        <mat-option value="Wants another follow-up">Wants another follow-up</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef>Complete</th>
                            <td mat-cell *matCellDef="let element">
                                <mat-slide-toggle [checked]="element.is_complete == 0 ? false : true" name="status"
                                    (change)="
                    toggleUpdate(
                      $event,
                      element.patient_id,
                      element.original_appt_date,
                      element.followup_date,
                      element.patients.clinic_id,
                      'recall-overdue',
                      element.status
                    )
                  ">
                                </mat-slide-toggle>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="isDataAvailable1">
                            <mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns2.length">
                                <span *ngIf="isEnableOR && followupOverDueRecall.length <= 0">You have no overdue
                                    recalls for {{ selectedMonthYear }}</span>
                                <span *ngIf="isEnableOR && followupOverDueRecall.length > 0">All overdue recalls have
                                    been completed for {{ selectedMonthYear }}</span>
                                <span *ngIf="!isEnableOR">Overdue Recalls are not enabled - this can be configured in
                                    your Jeeve Settings menu</span>
                            </mat-footer-cell>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns2"></tr>
                        <mat-footer-row *matFooterRowDef="['isDataAvailable1']" [ngClass]="
                followupOverDueRecallInCMP.length <= 0 ? 'show' : 'hide'
              "></mat-footer-row>
                    </table>
                </div>
                <ul class="main_pagination settings-table-pagination followup" *ngIf="orTablePages.length">
                    <li *ngFor="let page of orTablePages">
                        <button [ngClass]="{ active: page === currentORPage, page: true }"
                            (click)="handlePageChange(page, 'OR')">
                            {{ page }}
                        </button>
                    </li>
                </ul>
                <!-- follow-ups-card view-->
                <div class="follow-ups-card" *ngIf="followupOverDueRecallInCMP.length">
                    <mat-card class="huddle-card" *ngFor="let element of followupOverDueRecallInCMP">
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Patient :</div>
                            <div fxFlex="60">
                                {{ element.patients.firstname }} {{ element.patients.surname }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Phone :</div>
                            <div fxFlex="60">
                                {{ formatPhoneNumber(element.patients.mobile) }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Last Recall Date :</div>
                            <div fxFlex="60">
                                {{ element.original_appt_date | date: "MMM d, y":"timezone" }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Status :</div>
                            <div fxFlex="60">
                                <mat-form-field floatLabel="never" class="setPreviousDay">
                                    <mat-select placeholder="Select Status" [(value)]="element.status" id="setNote"
                                        (selectionChange)="
                      updateStatus(
                        $event.value,
                        element.patient_id,
                        element.original_appt_date,
                        element.patients.clinic_id,
                        element.patients.firstname,
                        element.patients.surname,
                        element.original_appt_date,
                        element.followup_date,
                        'recall-overdue',
                        nextBussinessDay
                      )
                    ">
                                        <mat-option value="">Select Status</mat-option>
                                        <mat-option value="Booked">Booked</mat-option>
                                        <mat-option value="Already booked">Already booked</mat-option>
                                        <mat-option value="Didn't want to book">Didn't want to book</mat-option>
                                        <mat-option value="Ineligible">Ineligible</mat-option>
                                        <mat-option value="Can't be reached">Can't be reached</mat-option>
                                        <mat-option value="Can't be reached - left voicemail">Can't be reached - left
                                            voicemail</mat-option>
                                        <mat-option value="Wants another follow-up">Wants another follow-up</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Follow-Up Date :</div>
                            <div fxFlex="60">
                                {{ element.followup_date | date: "MMM d, y":"timezone" }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Notes :</div>
                            <div fxFlex="60">
                                <div (mouseover)="historyPos($event)" class="info-icon-container tick historyTip">
                                    <i [tooltip]="{
                      title: !element.notes ? 'Add Notes' : 'Edit Notes'
                    }" [ngClass]="!element.notes ? 'red' : 'green'" class="fas fa-book notes" (click)="
                      openNotes(
                        element.notes,
                        element.patient_id,
                        element.original_appt_date,
                        element.followup_date,
                        'recall-overdue'
                      )
                    "></i>
                                </div>
                                <div class="historyTip history">
                                    <i (mouseover)="historyPos($event)" [tooltip]="formatHistory(element.history)"
                                        class="fa fa-history" *ngIf="element.history.length > 0"></i>
                                </div>
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Complete :</div>
                            <div fxFlex="60">
                                <mat-slide-toggle [checked]="element.is_complete == 0 ? false : true" name="status"
                                    (change)="
                    toggleUpdate(
                      $event,
                      element.patient_id,
                      element.original_appt_date,
                      element.followup_date,
                      element.patients.clinic_id,
                      'recall-overdue',
                      element.status
                    )
                  ">
                                </mat-slide-toggle>
                            </div>
                        </div>
                    </mat-card>
                </div>

                <!-- follow-ups-card view-end--->
            </div>
        </mat-tab>
        <!-- Patient Schedule Tab end -->


        <!-- Reminders Tab start -->
        <mat-tab label="Tick">
            <div class="follow-up">
                <mat-card-title>
                    <div class="title-follow-up d-inline-block">
                        Tick
                        <div class="info-icon-container">
                            <img [tooltip]="charTips['45']" src="../assets/images/info-icon.png" alt="info-icon"
                                class="info-icon" />
                        </div>
                    </div>

                    <div class="showComplete" *ngIf="followupTickFollowups.length > 0">
                        <mat-checkbox name="status" [checked]="showCompleteTick" (change)="updateToCompleteTF($event)">
                            Show Complete </mat-checkbox>
                    </div>

                    <div class="chipSets" *ngIf="tickFollowupsScrps.length > 0">
                        <mat-chip-list class="example-chip">
                            <mat-chip [tooltip]="{title:chips.script_title, info: chips.script_text }"
                                (mouseover)="historyPosChips($event,chips.colour)" class="example-box"
                                *ngFor="let chips of tickFollowupsScrps" [color]="chips.colour">
                                <span class="chipText">{{chips.script_title}}</span>
                            </mat-chip>
                        </mat-chip-list>
                    </div>
                </mat-card-title>

                <div class="card-loading" *ngIf="endTaksLoadingLoading">
                    <img class="tableLoader" src="../../assets/images/logo-icon.gif" />
                </div>
                <div class="follow-ups-table table-responsive">
                    <table mat-table [dataSource]="followupTickFollowupsInCMP"
                        class="mat-elevation-z8 customWidth thick">
                        <!-- Name Column -->
                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef>Patient Name</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.patients.firstname }} {{ element.patients.surname }}
                            </td>
                        </ng-container>

                        <!-- Weight Column -->
                        <ng-container matColumnDef="phone">
                            <th mat-header-cell *matHeaderCellDef>Phone Number</th>
                            <td mat-cell *matCellDef="let element">
                                <div class="phone_align_center">
                                    <img src="../assets/images/follow-up-call.png" alt="follow-up-call" />
                                    <span class="phone_no" *ngIf="element.patients.mobile">{{
                                        formatPhoneNumber(element.patients.mobile) }}</span>
                                    <span class="phone_no" *ngIf="
                      !element.patients.mobile && element.patients.phone_work
                    ">
                                        {{ formatPhoneNumber(element.patients.phone_work) }}
                                    </span>
                                    <span class="phone_no" *ngIf="
                      !element.patients.mobile && !element.patients.phone_work
                    ">
                                        {{ formatPhoneNumber(element.patients.phone_home) }}
                                    </span>
                                </div>
                            </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="code">
                            <th mat-header-cell *matHeaderCellDef>Treatment Date</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.original_appt_date | date: "MMM d, y":"timezone" }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="dentist">
                            <th mat-header-cell *matHeaderCellDef>Provider</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.dentists.name }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="followup_date">
                            <th mat-header-cell *matHeaderCellDef>Follow-Up Date</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.followup_date | date: "MMM d, y":"timezone" }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="note">
                            <th mat-header-cell *matHeaderCellDef>Status</th>
                            <td mat-cell *matCellDef="let element">
                                <mat-form-field floatLabel="never" class="setPreviousDay">
                                    <mat-select placeholder="Select Status" [(value)]="element.status" id="setNote2"
                                        (selectionChange)="
                      updateStatus(
                        $event.value,
                        element.patient_id,
                        element.original_appt_date,
                        element.patients.clinic_id,
                        element.patients.firstname,
                        element.patients.surname,
                        element.original_appt_date,
                        element.followup_date,
                        'tick-follower',
                        nextBussinessDay
                      )
                    ">
                                        <!--(selectionChange)="refreshPerformanceTab($event.value)" -->
                                        <mat-option value="">Select Status</mat-option>
                                        <mat-option value="Booked">Booked</mat-option>
                                        <mat-option value="Already booked">Already booked</mat-option>
                                        <mat-option value="Didn't want to book">Didn't want to book</mat-option>
                                        <mat-option value="Ineligible">Ineligible</mat-option>
                                        <mat-option value="Can't be reached">Can't be reached</mat-option>
                                        <mat-option value="Can't be reached - left voicemail">Can't be reached - left
                                            voicemail</mat-option>
                                        <mat-option value="Wants another follow-up">Wants another follow-up</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="book">
                            <th mat-header-cell *matHeaderCellDef>Notes</th>
                            <td mat-cell *matCellDef="let element">
                                <span (mouseover)="historyPos($event)" class="info-icon-container tick historyTip">
                                    <i [tooltip]="{
                      title: !element.notes ? 'Add Notes' : 'Edit Notes'
                    }" [ngClass]="!element.notes ? 'red' : 'green'" class="fas fa-book notes" (click)="
                      openNotes(
                        element.notes,
                        element.patient_id,
                        element.original_appt_date,
                        element.followup_date,
                        'tick-follower'
                      )
                    "></i>
                                </span>
                                <span (mouseover)="historyPos($event)" *ngIf="element.code != ''"
                                    class="info-icon-container tick historyTip"><i class="fas fa-notes-medical notes"
                                        [tooltip]="tipDoneCode[element.patient_id]"></i></span>
                                <span (mouseover)="historyPos($event)" *ngIf="element.future_date_show"
                                    class="info-icon-container tick historyTip">
                                    <i class="fas fa-calendar-check notes"
                                        [tooltip]="tipFutureDate[element.patient_id]"></i>
                                </span>
                                <div class="historyTip history">
                                    <i (mouseover)="historyPos($event)" [tooltip]="formatHistory(element.history)"
                                        class="fa fa-history" *ngIf="element.history.length > 0"></i>
                                </div>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef>Complete</th>
                            <td mat-cell *matCellDef="let element">
                                <mat-slide-toggle [checked]="element.is_complete == 0 ? false : true" name="status"
                                    (change)="
                    toggleUpdate(
                      $event,
                      element.patient_id,
                      element.original_appt_date,
                      element.followup_date,
                      element.patients.clinic_id,
                      'tick-follower',
                      element.status
                    )
                  ">
                                </mat-slide-toggle>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="isDataAvailable1">
                            <mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns3.length">
                                <span *ngIf="isEnableTH && followupTickFollowups.length <= 0">You have no tick followups
                                    for {{ selectedMonthYear }}</span>
                                <span *ngIf="isEnableTH && followupTickFollowups.length > 0">All tick followups have
                                    been completed for {{ selectedMonthYear }}</span>
                                <span *ngIf="!isEnableTH">Tick Followup are not enabled - this can be configured in your
                                    Jeeve Settings menu</span>
                            </mat-footer-cell>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="displayedColumns3"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns3"></tr>
                        <mat-footer-row *matFooterRowDef="['isDataAvailable1']" [ngClass]="
                followupTickFollowupsInCMP.length <= 0 ? 'show' : 'hide'
              "></mat-footer-row>
                    </table>
                </div>
                <ul class="main_pagination settings-table-pagination followup" *ngIf="thikTablePages.length">
                    <li *ngFor="let page of thikTablePages">
                        <button [ngClass]="{ active: page === currentThickPage, page: true }"
                            (click)="handlePageChange(page, 'TH')">
                            {{ page }}
                        </button>
                    </li>
                </ul>
                <!-- follow-ups-card view-->
                <div class="follow-ups-card" *ngIf="followupTickFollowupsInCMP.length">
                    <mat-card class="huddle-card" *ngFor="let element of followupTickFollowupsInCMP">
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Patient :</div>
                            <div fxFlex="60">
                                {{ element.patients.firstname }} {{ element.patients.surname }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Phone :</div>
                            <div fxFlex="60">
                                {{ formatPhoneNumber(element.patients.mobile) }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Treatment Date :</div>
                            <div fxFlex="60">
                                {{ element.original_appt_date | date: "MMM d, y":"timezone" }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Provider :</div>
                            <div fxFlex="60">
                                {{ element.dentists.name }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Status :</div>
                            <div fxFlex="60">
                                <mat-form-field floatLabel="never" class="setPreviousDay">
                                    <mat-select placeholder="Select Status" [(value)]="element.status" id="setNote2"
                                        (selectionChange)="
                      updateStatus(
                        $event.value,
                        element.patient_id,
                        element.original_appt_date,
                        element.patients.clinic_id,
                        element.patients.firstname,
                        element.patients.surname,
                        element.original_appt_date,
                        element.followup_date,
                        'tick-follower',
                        nextBussinessDay
                      )
                    ">
                                        <mat-option value="">Select Status</mat-option>
                                        <mat-option value="Booked">Booked</mat-option>
                                        <mat-option value="Already booked">Already booked</mat-option>
                                        <mat-option value="Didn't want to book">Didn't want to book</mat-option>
                                        <mat-option value="Ineligible">Ineligible</mat-option>
                                        <mat-option value="Can't be reached">Can't be reached</mat-option>
                                        <mat-option value="Can't be reached - left voicemail">Can't be reached - left
                                            voicemail</mat-option>
                                        <mat-option value="Wants another follow-up">Wants another follow-up</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Follow-Up Date :</div>
                            <div fxFlex="60">
                                {{ element.followup_date | date: "MMM d, y":"timezone" }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Notes :</div>
                            <div fxFlex="60">
                                <span (mouseover)="historyPos($event)" class="info-icon-container tick historyTip">
                                    <i [tooltip]="{
                      title: !element.notes ? 'Add Notes' : 'Edit Notes'
                    }" [ngClass]="!element.notes ? 'red' : 'green'" class="fas fa-book notes" (click)="
                      openNotes(
                        element.notes,
                        element.patient_id,
                        element.original_appt_date,
                        element.followup_date,
                        'tick-follower'
                      )
                    "></i>
                                </span>
                                <span (mouseover)="historyPos($event)" *ngIf="element.code != ''"
                                    class="info-icon-container tick historyTip"><i class="fas fa-notes-medical notes"
                                        [tooltip]="tipDoneCode[element.patient_id]"></i></span>
                                <span (mouseover)="historyPos($event)" *ngIf="element.future_date_show"
                                    class="info-icon-container tick historyTip">
                                    <i class="fas fa-calendar-check notes"
                                        [tooltip]="tipFutureDate[element.patient_id]"></i>
                                </span>
                                <div class="historyTip history">
                                    <i (mouseover)="historyPos($event)" [tooltip]="formatHistory(element.history)"
                                        class="fa fa-history" *ngIf="element.history.length > 0"></i>
                                </div>
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Complete :</div>
                            <div fxFlex="60">
                                <mat-slide-toggle [checked]="element.is_complete == 0 ? false : true" name="status"
                                    (change)="
                    toggleUpdate(
                      $event,
                      element.patient_id,
                      element.original_appt_date,
                      element.followup_date,
                      element.patients.clinic_id,
                      'tick-follower',
                      element.status
                    )
                  ">
                                </mat-slide-toggle>
                            </div>
                        </div>
                    </mat-card>
                </div>

                <!-- follow-ups-card view-end--->

            </div>
        </mat-tab>
        <!-- Reminders Tab end -->
        <!-- Dentist Performance Tab -->
        <mat-tab label="Post op Calls">
            <div class="follow-up">
                <mat-card-title>
                    <div class="title-follow-up d-inline-block">
                        Post op Calls
                        <div class="info-icon-container">
                            <img [tooltip]="charTips['43']" src="../assets/images/info-icon.png" alt="info-icon"
                                class="info-icon" />
                        </div>
                    </div>

                    <div class="showComplete" *ngIf="followupPostOpCalls.length > 0">
                        <mat-checkbox name="status" [checked]="postopCallsPostOp" (change)="updateToCompleteOP($event)">
                            Show Complete</mat-checkbox>
                    </div>
                    <div class="chipSets" *ngIf="postOpCallsScrps.length > 0">
                        <mat-chip-list class="example-chip">
                            <mat-chip [tooltip]="{title:chips.script_title, info: chips.script_text }"
                                (mouseover)="historyPosChips($event,chips.colour)" class="example-box"
                                *ngFor="let chips of postOpCallsScrps" [color]="chips.colour">
                                <span class="chipText">{{chips.script_title}}</span>
                            </mat-chip>
                        </mat-chip-list>
                    </div>
                </mat-card-title>

                <div class="card-loading" *ngIf="poLoadingLoading">
                    <img class="tableLoader" src="../../assets/images/logo-icon.gif" />
                </div>
                <div class="follow-ups-table table-responsive">
                    <table mat-table [dataSource]="followupPostOpCallsInComp"
                        class="mat-elevation-z8 customWidth PostOp">
                        <!-- Name Column -->
                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef>Patient Name</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.patients.firstname }} {{ element.patients.surname }}
                            </td>
                        </ng-container>

                        <!-- Weight Column -->
                        <ng-container matColumnDef="phone">
                            <th mat-header-cell *matHeaderCellDef>Phone Number</th>
                            <td mat-cell *matCellDef="let element">
                                <div class="phone_align_center">
                                    <img src="../assets/images/follow-up-call.png" alt="follow-up-call" />
                                    <span class="phone_no" *ngIf="element.patients.mobile">{{
                                        formatPhoneNumber(element.patients.mobile) }}</span>
                                    <span class="phone_no" *ngIf="
                      !element.patients.mobile && element.patients.phone_work
                    ">
                                        {{ formatPhoneNumber(element.patients.phone_work) }}
                                    </span>
                                    <span class="phone_no" *ngIf="
                      !element.patients.mobile && !element.patients.phone_work
                    ">
                                        {{ formatPhoneNumber(element.patients.phone_home) }}
                                    </span>
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="code">
                            <th mat-header-cell *matHeaderCellDef>Treatment Date</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.original_appt_date | date: "MMM d, y":"timezone" }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="dentist">
                            <th mat-header-cell *matHeaderCellDef>Provider</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.dentists.name }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="date">
                            <th mat-header-cell *matHeaderCellDef>Treatment Done</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.post_op_codes }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="followup_date">
                            <th mat-header-cell *matHeaderCellDef>Follow-Up Date</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.followup_date | date: "MMM d, y":"timezone" }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef>Complete</th>
                            <td mat-cell *matCellDef="let element">
                                <mat-slide-toggle [checked]="element.is_complete == 0 ? false : true" name="status"
                                    (change)="
                    toggleUpdate(
                      $event,
                      element.patient_id,
                      element.original_appt_date,
                      element.followup_date,
                      element.patients.clinic_id,
                      'post-op-calls'
                    )
                  ">
                                </mat-slide-toggle>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="isDataAvailable1">
                            <mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns1.length">
                                <span *ngIf="isEnablePO && followupPostOpCalls.length <= 0">You have no post op calls
                                    for {{ selectedMonthYear }}</span>
                                <span *ngIf="isEnablePO && followupPostOpCalls.length > 0">All post op calls have been
                                    completed for {{ selectedMonthYear }}</span>
                                <span *ngIf="!isEnablePO">Post Op calls are not enabled - this can be configured in your
                                    Jeeve Settings menu</span>
                            </mat-footer-cell>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns1"></tr>
                        <mat-footer-row *matFooterRowDef="['isDataAvailable1']" [ngClass]="
                followupPostOpCallsInComp.length <= 0 ? 'show' : 'hide'
              "></mat-footer-row>
                    </table>
                </div>
                <ul class="main_pagination settings-table-pagination followup" *ngIf="opTablePages.length">
                    <li *ngFor="let page of opTablePages">
                        <button [ngClass]="{ active: page === currentOpPage, page: true }"
                            (click)="handlePageChange(page, 'OP')">
                            {{ page }}
                        </button>
                    </li>
                </ul>
                <!-- follow-ups-card view-->
                <div class="follow-ups-card" *ngIf="followupPostOpCallsInComp.length">
                    <mat-card class="huddle-card" *ngFor="let element of followupPostOpCallsInComp">
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Patient :</div>
                            <div fxFlex="60">
                                {{ element.patients.firstname }} {{ element.patients.surname }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Phone :</div>
                            <div fxFlex="60">
                                {{ formatPhoneNumber(element.patients.mobile) }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Treatment Date :</div>
                            <div fxFlex="60">
                                {{ element.original_appt_date | date: "MMM d, y":"timezone" }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Provider :</div>
                            <div fxFlex="60">
                                {{ element.dentists.name }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Treatment Done :</div>
                            <div fxFlex="60">{{ element.post_op_codes }}</div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Follow-Up Date :</div>
                            <div fxFlex="60">
                                {{ element.followup_date | date: "MMM d, y":"timezone" }}
                            </div>
                        </div>
                        <!-- <div fxLayout="row" class="huddle-card-row">
                <div fxFlex="40">Notes :</div>
                <div fxFlex="60">
                  <i class="fas fa-book notes"></i>
                </div>
              </div>  -->
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Complete :</div>
                            <div fxFlex="60">
                                <mat-slide-toggle [checked]="element.is_complete == 0 ? false : true" name="status"
                                    (change)="
                    toggleUpdate(
                      $event,
                      element.patient_id,
                      element.original_appt_date,
                      element.followup_date,
                      element.patients.clinic_id,
                      'post-op-calls'
                    )
                  ">
                                </mat-slide-toggle>
                            </div>
                        </div>
                    </mat-card>
                </div>

                <!-- follow-ups-card view-end--->
            </div>

        </mat-tab>
        <!-- Dentist Performance Tab -->


        <!-- Dentist Performance Tab -->
        <mat-tab label="FTA / UTA">
            <div class="follow-up">
                <mat-card-title>
                    <div class="title-follow-up d-inline-block">
                        FTA / UTA
                        <div class="info-icon-container">
                            <img [tooltip]="charTips['52']" src="../assets/images/info-icon.png" alt="info-icon"
                                class="info-icon" />
                        </div>
                    </div>

                    <div class="showComplete" *ngIf="followupFtaFollowups.length > 0">
                        <mat-checkbox name="status" [checked]="showCompleteFta" (change)="updateToCompleteFT($event)">
                            Show Complete </mat-checkbox>
                    </div>
                    <div class="chipSets" *ngIf="ftaFollowupsScrps.length > 0">
                        <mat-chip-list class="example-chip">
                            <mat-chip [tooltip]="{title:chips.script_title, info: chips.script_text }"
                                (mouseover)="historyPosChips($event,chips.colour)" class="example-box"
                                *ngFor="let chips of ftaFollowupsScrps" [color]="chips.colour">
                                <span class="chipText">{{chips.script_title}}</span>
                            </mat-chip>
                        </mat-chip-list>
                    </div>
                </mat-card-title>

                <div class="card-loading" *ngIf="ftaTaksLoadingLoading">
                    <img class="tableLoader" src="../../assets/images/logo-icon.gif" />
                </div>
                <div class="follow-ups-table table-responsive">
                    <table mat-table [dataSource]="followupFtaFollowupsInCMP"
                        class="mat-elevation-z8 customWidth thick">
                        <!-- Name Column -->
                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef>Patient Name</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.patients.firstname }} {{ element.patients.surname }}
                            </td>
                        </ng-container>

                        <!-- Weight Column -->
                        <ng-container matColumnDef="phone">
                            <th mat-header-cell *matHeaderCellDef>Phone Number</th>
                            <td mat-cell *matCellDef="let element">
                                <div class="phone_align_center">
                                    <img src="../assets/images/follow-up-call.png" alt="follow-up-call" />
                                    <span class="phone_no" *ngIf="element.patients.mobile">{{
                                        formatPhoneNumber(element.patients.mobile) }}</span>
                                    <span class="phone_no" *ngIf="
                      !element.patients.mobile && element.patients.phone_work
                    ">
                                        {{ formatPhoneNumber(element.patients.phone_work) }}
                                    </span>
                                    <span class="phone_no" *ngIf="
                      !element.patients.mobile && !element.patients.phone_work
                    ">
                                        {{ formatPhoneNumber(element.patients.phone_home) }}
                                    </span>
                                </div>
                            </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="code">
                            <th mat-header-cell *matHeaderCellDef>Treatment Date</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.original_appt_date | date: "MMM d, y":"timezone" }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="dentist">
                            <th mat-header-cell *matHeaderCellDef>Provider</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.dentists.name}}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="followup_date">
                            <th mat-header-cell *matHeaderCellDef>Follow-Up Date</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.followup_date | date: "MMM d, y":"timezone" }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="note">
                            <th mat-header-cell *matHeaderCellDef>Status</th>
                            <td mat-cell *matCellDef="let element">
                                <mat-form-field floatLabel="never" class="setPreviousDay mb-0">
                                    <mat-select placeholder="Select Status" [(value)]="element.status" id="setNote2"
                                        (selectionChange)="
                      updateStatus(
                        $event.value,
                        element.patient_id,
                        element.original_appt_date,
                        element.patients.clinic_id,
                        element.patients.firstname,
                        element.patients.surname,
                        element.original_appt_date,
                        element.followup_date,
                        'fta-follower',
                        nextBussinessDay
                      )
                    ">
                                        <!--(selectionChange)="refreshPerformanceTab($event.value)" -->
                                        <mat-option value="">Select Status</mat-option>
                                        <mat-option value="Booked">Booked</mat-option>
                                        <mat-option value="Already booked">Already booked</mat-option>
                                        <mat-option value="Didn't want to book">Didn't want to book</mat-option>
                                        <mat-option value="Ineligible">Ineligible</mat-option>
                                        <mat-option value="Can't be reached">Can't be reached</mat-option>
                                        <mat-option value="Can't be reached - left voicemail">Can't be reached - left
                                            voicemail</mat-option>
                                        <mat-option value="Wants another follow-up">Wants another follow-up</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="book">
                            <th mat-header-cell *matHeaderCellDef>Notes</th>
                            <td mat-cell *matCellDef="let element">
                                <span class="info-icon-container tick historyTip" (mouseover)="historyPos($event)">
                                    <i [tooltip]="{
                      title: !element.notes ? 'Add Notes' : 'Edit Notes'
                    }" [ngClass]="!element.notes ? 'red' : 'green'" class="fas fa-book notes" (click)="
                      openNotes(
                        element.notes,
                        element.patient_id,
                        element.original_appt_date,
                        element.followup_date,
                        'fta-follower'
                      )
                    "></i>
                                </span>
                                <span (mouseover)="historyPos($event)" *ngIf="element.code != ''"
                                    class="info-icon-container tick historyTip"><i class="fas fa-notes-medical notes"
                                        [tooltip]="tipFtaDoneCode[element.patient_id]"></i></span>
                                <span (mouseover)="historyPos($event)" *ngIf="element.future_date_show"
                                    class="info-icon-container tick historyTip">
                                    <i class="fas fa-calendar-check notes"
                                        [tooltip]="tipFtaFutureDate[element.patient_id]"></i>
                                </span>
                                <div class="historyTip history">
                                    <i (mouseover)="historyPos($event)" [tooltip]="formatHistory(element.history)"
                                        class="fa fa-history" *ngIf="element.history.length > 0"></i>
                                </div>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef>Complete</th>
                            <td mat-cell *matCellDef="let element">
                                <mat-slide-toggle [checked]="element.is_complete == 0 ? false : true" name="status"
                                    (change)="
                    toggleUpdate(
                      $event,
                      element.patient_id,
                      element.original_appt_date,
                      element.followup_date,
                      element.patients.clinic_id,
                      'fta-follower',
                      element.status
                    )
                  ">
                                </mat-slide-toggle>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="isDataAvailable1">
                            <mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns3.length">
                                <span *ngIf="isEnableFT && followupFtaFollowups.length <= 0">You have no FTA followups
                                    for {{ selectedMonthYear }}</span>
                                <span *ngIf="isEnableFT && followupFtaFollowups.length > 0">All FTA followups have been
                                    completed for {{ selectedMonthYear }}</span>
                                <span *ngIf="!isEnableFT">FTA Followup are not enabled - this can be configured in your
                                    Jeeve Settings menu</span>
                            </mat-footer-cell>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="displayedColumns3"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns3"></tr>
                        <mat-footer-row *matFooterRowDef="['isDataAvailable1']" [ngClass]="
                followupFtaFollowupsInCMP.length <= 0 ? 'show' : 'hide'
              "></mat-footer-row>
                    </table>
                </div>
                <ul class="main_pagination settings-table-pagination followup" *ngIf="ftTablePages.length">
                    <li *ngFor="let page of ftTablePages">
                        <button [ngClass]="{ active: page === currentFTPage, page: true }"
                            (click)="handlePageChange(page, 'FT')">
                            {{ page }}
                        </button>
                    </li>
                </ul>
                <!-- follow-ups-card view-->
                <div class="follow-ups-card" *ngIf="followupFtaFollowupsInCMP.length">
                    <mat-card class="huddle-card" *ngFor="let element of followupFtaFollowupsInCMP">
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Patient :</div>
                            <div fxFlex="60">
                                {{ element.patients.firstname }} {{ element.patients.surname }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Phone :</div>
                            <div fxFlex="60">
                                {{ formatPhoneNumber(element.patients.mobile) }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Treatment Date :</div>
                            <div fxFlex="60">
                                {{ element.original_appt_date | date: "MMM d, y":"timezone" }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Provider :</div>
                            <div fxFlex="60">
                                {{ element.dentists.name | date: "MMM d, y":"timezone" }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Status :</div>
                            <div fxFlex="60">
                                <mat-form-field floatLabel="never" class="setPreviousDay">
                                    <mat-select placeholder="Select Status" [(value)]="element.status" id="setNote2"
                                        (selectionChange)="
                      updateStatus(
                        $event.value,
                        element.patient_id,
                        element.original_appt_date,
                        element.patients.clinic_id,
                        element.patients.firstname,
                        element.patients.surname,
                        element.original_appt_date,
                        element.followup_date,
                        'fta-follower',
                        nextBussinessDay
                      )
                    ">
                                        <mat-option value="">Select Status</mat-option>
                                        <mat-option value="Booked">Booked</mat-option>
                                        <mat-option value="Already booked">Already booked</mat-option>
                                        <mat-option value="Didn't want to book">Didn't want to book</mat-option>
                                        <mat-option value="Ineligible">Ineligible</mat-option>
                                        <mat-option value="Can't be reached">Can't be reached</mat-option>
                                        <mat-option value="Can't be reached - left voicemail">Can't be reached - left
                                            voicemail</mat-option>
                                        <mat-option value="Wants another follow-up">Wants another follow-up</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Follow-Up Date :</div>
                            <div fxFlex="60">
                                {{ element.followup_date | date: "MMM d, y":"timezone" }}
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Notes :</div>
                            <div fxFlex="60">
                                <span class="info-icon-container tick historyTip" (mouseover)="historyPos($event)">
                                    <i [tooltip]="{
                      title: !element.notes ? 'Add Notes' : 'Edit Notes'
                    }" [ngClass]="!element.notes ? 'red' : 'green'" class="fas fa-book notes" (click)="
                      openNotes(
                        element.notes,
                        element.patient_id,
                        element.original_appt_date,
                        element.followup_date,
                        'fta-follower'
                      )
                    "></i>
                                </span>
                                <span (mouseover)="historyPos($event)" *ngIf="element.code != ''"
                                    class="info-icon-container tick historyTip"><i class="fas fa-notes-medical notes"
                                        [tooltip]="tipFtaDoneCode[element.patient_id]"></i></span>
                                <span (mouseover)="historyPos($event)" *ngIf="element.future_date_show"
                                    class="info-icon-container tick historyTip">
                                    <i class="fas fa-calendar-check notes"
                                        [tooltip]="tipFtaFutureDate[element.patient_id]"></i>
                                </span>
                                <div class="historyTip history">
                                    <i (mouseover)="historyPos($event)" [tooltip]="formatHistory(element.history)"
                                        class="fa fa-history" *ngIf="element.history.length > 0"></i>
                                </div>
                            </div>
                        </div>
                        <div fxLayout="row" class="huddle-card-row">
                            <div fxFlex="40">Complete :</div>
                            <div fxFlex="60">
                                <mat-slide-toggle [checked]="element.is_complete == 0 ? false : true" name="status"
                                    (change)="
                    toggleUpdate(
                      $event,
                      element.patient_id,
                      element.original_appt_date,
                      element.followup_date,
                      element.patients.clinic_id,
                      'fta-follower',
                      element.status
                    )
                  ">
                                </mat-slide-toggle>
                            </div>
                        </div>
                    </mat-card>
                </div>

                <!-- follow-ups-card view-end--->
            </div>
        </mat-tab>
        <!-- Dentist Performance Tab -->


        <!-- Internal Referrals Tab -->
        <mat-tab label="Internal Referrals">
            <div class="follow-up">
                <mat-card-title>
                    <div class="title-follow-up d-inline-block">
                        Internal Referrals
                        <!--  <div class="info-icon-container">
                            <img [tooltip]="charTips['52']" src="../assets/images/info-icon.png" alt="info-icon" class="info-icon" />
                        </div> -->
                    </div>
                       <div class="showComplete" *ngIf="internalReferrals.length > 0">
                        <mat-checkbox name="status" [checked]="showCompleteReferrals" (change)="updateToCompleteIR($event)">Show Complete </mat-checkbox>
                    </div>
                </mat-card-title>

                  <div class="card-loading" *ngIf="IRLoadingLoading">
                    <img class="tableLoader" src="../../assets/images/logo-icon.gif" />
                </div>
                <div class="follow-ups-table internal-referrals table-responsive">

                    <table mat-table [dataSource]="internalReferralRecallInCMP"
                        class="mat-elevation-z8 customWidth thick">
                        <!-- Name Column -->
                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef>Patient Name</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.patients.firstname }} {{ element.patients.surname }}
                            </td>
                        </ng-container>

                        <!-- phone Column -->
                        <ng-container matColumnDef="phone">
                            <th mat-header-cell *matHeaderCellDef>Phone Number</th>
                            <td mat-cell *matCellDef="let element">
                                <div class="phone_align_center">
                                    <img src="../assets/images/follow-up-call.png" alt="Phone Number" />
                                    <span class="phone_no" *ngIf="element.patients.mobile">{{
                                        formatPhoneNumber(element.patients.mobile) }}</span>
                                    <span class="phone_no"
                                        *ngIf="!element.patients.mobile && element.patients.phone_work">
                                        {{ formatPhoneNumber(element.patients.phone_work) }}
                                    </span>
                                    <span class="phone_no"
                                        *ngIf=" !element.patients.mobile && !element.patients.phone_work ">
                                        {{ formatPhoneNumber(element.patients.phone_home) }}
                                    </span>
                                </div>
                            </td>
                        </ng-container>

                        <!-- referral Column -->
                        <ng-container matColumnDef="referral">
                            <th mat-header-cell *matHeaderCellDef>Referral Date</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.original_appt_date | date: "MMM d, y":"timezone" }}
                            </td>
                        </ng-container>

                        <!-- Treatment Column -->
                        <ng-container matColumnDef="treatment">
                            <th mat-header-cell *matHeaderCellDef>Treatment</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.treat_item }}
                            </td>
                        </ng-container>

                        <!-- Provider Column -->
                        <ng-container matColumnDef="provider">
                            <th mat-header-cell *matHeaderCellDef>Provider</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.dentists.name }}
                            </td>
                        </ng-container>

                        <!-- Status Column -->
                        <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef>Status</th>
                            <td mat-cell *matCellDef="let element">
                                <mat-form-field floatLabel="never" class="setPreviousDay">
                                    <mat-select placeholder="Select Status" [(value)]="element.status" id="setNote"
                                        (selectionChange)="updateStatus( $event.value, element.patient_id, element.original_appt_date, element.patients.clinic_id, element.patients.firstname, element.patients.surname, element.original_appt_date, element.followup_date, 'internal-referrals', nextBussinessDay )">
                                        <mat-option value="">Select Status</mat-option>
                                        <mat-option value="Booked">Booked</mat-option>
                                        <mat-option value="Already booked">Already booked</mat-option>
                                        <mat-option value="Didn't want to book">Didn't want to book</mat-option>
                                        <mat-option value="Ineligible">Ineligible</mat-option>
                                        <mat-option value="Can't be reached">Can't be reached</mat-option>
                                        <mat-option value="Can't be reached - left voicemail">Can't be reached - left
                                            voicemail</mat-option>
                                        <mat-option value="Wants another follow-up">Wants another follow-up</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                        </ng-container>
                        <!-- Follow-up Date Column -->
                        <ng-container matColumnDef="followup_date">
                            <th mat-header-cell *matHeaderCellDef>Follow-Up Date</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.followup_date | date: "MMM d, y":"timezone" }}
                            </td>
                        </ng-container>
                        <!-- Notes Column -->
                        <ng-container matColumnDef="notes">
                            <th mat-header-cell *matHeaderCellDef>Notes</th>
                            <td mat-cell *matCellDef="let element">
                                <span (mouseover)="historyPos($event)" class="info-icon-container tick historyTip">
                                    <i [tooltip]="{ title: !element.notes ? 'Add Notes' : 'Edit Notes' }"
                                        [ngClass]="!element.notes ? 'red' : 'green'" class="fas fa-book notes"
                                        (click)=" openNotes( element.notes, element.patient_id, element.original_appt_date, element.followup_date, 'internal-referrals' ) "></i>
                                </span>
                                <div class="historyTip history">
                                    <i (mouseover)="historyPos($event)" [tooltip]="formatHistory(element.history)"
                                        class="fa fa-history" *ngIf="element.history.length > 0"></i>
                                </div>
                            </td>
                        </ng-container>
                        <!-- Complete Column -->
                        <ng-container matColumnDef="complete">
                            <th mat-header-cell *matHeaderCellDef>Complete</th>
                            <td mat-cell *matCellDef="let element">
                                <mat-slide-toggle [checked]="element.is_complete == 0 ? false : true" name="status"
                                    (change)="toggleUpdate( $event, element.patient_id, element.original_appt_date, element.followup_date, element.patients.clinic_id, 'internal-referrals', element.status ) ">
                                </mat-slide-toggle>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="isDataAvailable1">
                            <mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns4.length">
                                <span *ngIf="internalReferrals.length <= 0">You have no internal
                                    referrals for {{ selectedMonthYear }}</span>
                            </mat-footer-cell>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="displayedColumns4"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns4"></tr>
                        <mat-footer-row *matFooterRowDef="['isDataAvailable1']"
                            [ngClass]="internalReferralRecallInCMP.length <= 0 ? 'show' : 'hide'"></mat-footer-row>
                    </table>
                </div>
                <ul class="main_pagination settings-table-pagination followup" *ngIf="irTablePages.length">
                    <li *ngFor="let page of irTablePages">
                        <button [ngClass]="{ active: page === currentIRPage, page: true }"
                            (click)="handlePageChange(page, 'IR')">
                            {{ page }}
                        </button>
                    </li>
                </ul>
                <!-- follow-ups-card view-end--->
            </div>
        </mat-tab>
        <!-- Internal Referrals Tab -->
    </mat-tab-group>
</div>