<input type="button" id="clinic_initiate" (click)="initiate_clinic()" [style.display]="'none'">
<div class="sa_dashboard_inner_content morning-huddle">   
  <mat-tab-group [selectedIndex]="selectedTab">
    <!-- Dentist Performance Tab -->
    <mat-tab label="Post op Calls">

        <div class="morning-huddle-date">
          <table class="filters">
            <tr>
              <td>
        <mat-form-field floatLabel="never" class="setPreviousDay">
          <mat-select [(ngModel)] = "selectedMonth" [(value)] = "selectedMonth"  (selectionChange)="refreshPerformanceTab($event.value)" id="setMonth">
            <mat-option value="0">January</mat-option>
            <mat-option value="1">February</mat-option>
            <mat-option value="2">March</mat-option>
            <mat-option value="3">April</mat-option>
            <mat-option value="4">May</mat-option>
            <mat-option value="5">June</mat-option>
            <mat-option value="6">July</mat-option>
            <mat-option value="7">August</mat-option>
            <mat-option value="8">September</mat-option>
            <mat-option value="9">October</mat-option>
            <mat-option value="10">November</mat-option>
            <mat-option value="11">December</mat-option>                         
          </mat-select>
        </mat-form-field>
      </td>
      <td>
        <mat-form-field floatLabel="never" class="setPreviousDay">
          <mat-select  [(ngModel)] = "selectedYear" [(value)] = "selectedYear" (selectionChange)="refreshPerformanceTab($event.value)" id="setYear">
            <mat-option [value]="subtractYears(0) | date:'y':'timezone'">{{ subtractYears(0) | date:'y':'timezone' }}</mat-option>
            <mat-option [value]="subtractYears(1) | date:'y':'timezone'">{{ subtractYears(1) | date:'y':'timezone' }}</mat-option>
            <mat-option [value]="subtractYears(2) | date:'y':'timezone'">{{ subtractYears(2) | date:'y':'timezone' }}</mat-option>
            <mat-option [value]="subtractYears(3) | date:'y':'timezone'">{{ subtractYears(3)  | date:'y':'timezone'}}</mat-option>
            <mat-option [value]="subtractYears(4) | date:'y':'timezone'">{{ subtractYears(4)  | date:'y':'timezone'}}</mat-option>
                            
          </mat-select>
        </mat-form-field>
      </td>
    </tr>
  </table>
      </div>



        <div class="showComplete" *ngIf="followupPostOpCallsInComp.length > 0">
            <mat-checkbox name="status" [checked]="postopCallsPostOp" (change)="updateToCompleteOP($event)">Show
              Complete</mat-checkbox>
          </div>
           <table fxHide fxShow.gt-sm mat-table [dataSource]="followupPostOpCallsInComp"
              class="mat-elevation-z8 customWidth PostOp">
              <!-- Name Column -->
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Patient Name </th>
                <td mat-cell *matCellDef="let element"> {{element.patients.firstname }} {{element.patients.surname }}
                </td>
              </ng-container>

              <!-- Weight Column -->
              <ng-container matColumnDef="phone">
                <th mat-header-cell *matHeaderCellDef> Phone Number </th>
                <td mat-cell *matCellDef="let element">
                  <div class="phone_align_center">
                    <img src="../assets/images/follow-up-call.png" alt="follow-up-call" />
                    <span class="phone_no"
                      *ngIf="element.patients.mobile">{{ formatPhoneNumber(element.patients.mobile) }}</span>
                    <span class="phone_no"
                      *ngIf="!element.patients.mobile && element.patients.phone_work">{{ formatPhoneNumber(element.patients.phone_work) }}</span>
                    <span class="phone_no"
                      *ngIf="!element.patients.mobile && !element.patients.phone_work">{{ formatPhoneNumber(element.patients.phone_home) }}</span>
                  </div>
                </td>
              </ng-container>
              <ng-container matColumnDef="code">
                <th mat-header-cell *matHeaderCellDef>Treatment Date</th>
                <td mat-cell *matCellDef="let element">{{ element.original_appt_date | date:'MMM d, y':'timezone' }}
                </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef> Treatment Done </th>
                <td mat-cell *matCellDef="let element">{{ element.post_op_codes }}</td>
              </ng-container>

              <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef>Complete</th>
                <td mat-cell *matCellDef="let element">
                  <mat-slide-toggle [checked]="element.is_complete == 0? false : true" name="status"
                    (change)="toggleUpdate($event,element.patient_id,element.original_appt_date,element.patients.clinic_id,'post-op-calls')">
                  </mat-slide-toggle>
                </td>
              </ng-container>
              <ng-container matColumnDef="isDataAvailable1">
                <mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns1.length">
                  You have no post op calls today
                </mat-footer-cell>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
              <mat-footer-row *matFooterRowDef="['isDataAvailable1']"
                [ngClass]="(followupPostOpCallsInComp.length <= 0)? 'show' : 'hide'"></mat-footer-row>
            </table>
    </mat-tab>
    <!-- Dentist Performance Tab -->
    <!-- Patient Schedule Tab start -->
    <mat-tab label="Overdue Recalls">
        <div class="showComplete" *ngIf="followupOverDueRecallInCMP.length > 0">
            <mat-checkbox name="status" [checked]="showCompleteOverdue" (change)="updateToCompleteOR($event)">Show
              Complete</mat-checkbox>
          </div>
               <table fxHide fxShow.gt-sm mat-table [dataSource]=""
              class="mat-elevation-z8 customWidth thick">

              <!-- Name Column -->
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Patient Name </th>
                <td mat-cell *matCellDef="let element"> {{element.patients.firstname }} {{element.patients.surname }}
                </td>
              </ng-container>

              <!-- Weight Column -->
              <ng-container matColumnDef="phone">
                <th mat-header-cell *matHeaderCellDef> Phone Number </th>
                <td mat-cell *matCellDef="let element">
                  <div class="phone_align_center">
                    <img src="../assets/images/follow-up-call.png" alt="follow-up-call" />
                    <span class="phone_no"
                      *ngIf="element.patients.mobile">{{ formatPhoneNumber(element.patients.mobile) }}</span>
                    <span class="phone_no"
                      *ngIf="!element.patients.mobile && element.patients.phone_work">{{ formatPhoneNumber(element.patients.phone_work) }}</span>
                    <span class="phone_no"
                      *ngIf="!element.patients.mobile && !element.patients.phone_work">{{ formatPhoneNumber(element.patients.phone_home) }}</span>
                  </div>
                </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="code">
                <th mat-header-cell *matHeaderCellDef>Last Recall Date </th>
                <td mat-cell *matCellDef="let element">{{ element.original_appt_date | date:'MMM d, y':'timezone' }}
                </td>
              </ng-container>

              <ng-container matColumnDef="note">
                <th mat-header-cell *matHeaderCellDef>Status</th>
                <td mat-cell *matCellDef="let element">
                  <mat-form-field floatLabel="never" class="setPreviousDay">
                    <mat-select placeholder="Select Status" [(value)]="element.status" id="setNote"
                      (selectionChange)="updateStatus($event.value,element.patient_id,element.original_appt_date,element.patients.clinic_id, 'recall-overdue')">
                      <mat-option value="Ineligible">Ineligible</mat-option>
                      <mat-option value="Already booked">Already booked</mat-option>
                      <mat-option value="Did not want to book">Didnâ€™t want to book</mat-option>
                      <mat-option value="Cant be reached">Can't be reached</mat-option>
                      <mat-option value="Booked">Booked</mat-option>
                    </mat-select>
                  </mat-form-field>
                </td>
              </ng-container>
              <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef>Complete</th>
                <td mat-cell *matCellDef="let element">
                  <mat-slide-toggle [checked]="element.is_complete == 0? false : true" name="status"
                    (change)="toggleUpdate($event,element.patient_id,element.original_appt_date,element.patients.clinic_id,'recall-overdue')">
                  </mat-slide-toggle>
                </td>
              </ng-container>
              <ng-container matColumnDef="isDataAvailable1">
                <mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns2.length">
                  You have no overdue recalls today
                </mat-footer-cell>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
              <mat-footer-row *matFooterRowDef="['isDataAvailable1']"
                [ngClass]="(followupOverDueRecallInCMP.length <= 0)? 'show' : 'hide'"></mat-footer-row>
            </table>
    </mat-tab>
    <!-- Patient Schedule Tab end -->

    <!-- Reminders Tab start -->
    <mat-tab label="Tick Followups" >
         <div class="showComplete" *ngIf="followupTickFollowupsInCMP.length > 0">
            <mat-checkbox name="status" [checked]="showCompleteTick" (change)="updateToCompleteTF($event)">Show Complete
            </mat-checkbox>
          </div>
          <table fxHide fxShow.gt-sm mat-table [dataSource]="followupTickFollowupsInCMP"
              class="mat-elevation-z8 customWidth thick">


              <!-- Name Column -->
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Patient Name </th>
                <td mat-cell *matCellDef="let element"> {{element.patients.firstname }} {{element.patients.surname }}
                </td>
              </ng-container>

              <!-- Weight Column -->
              <ng-container matColumnDef="phone">
                <th mat-header-cell *matHeaderCellDef> Phone Number </th>
                <td mat-cell *matCellDef="let element">
                  <div class="phone_align_center">
                    <img src="../assets/images/follow-up-call.png" alt="follow-up-call" />
                    <span class="phone_no"
                      *ngIf="element.patients.mobile">{{ formatPhoneNumber(element.patients.mobile) }}</span>
                    <span class="phone_no"
                      *ngIf="!element.patients.mobile && element.patients.phone_work">{{ formatPhoneNumber(element.patients.phone_work) }}</span>
                    <span class="phone_no"
                      *ngIf="!element.patients.mobile && !element.patients.phone_work">{{ formatPhoneNumber(element.patients.phone_home) }}</span>
                  </div>
                </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="code">
                <th mat-header-cell *matHeaderCellDef>Treatment Date</th>
                <td mat-cell *matCellDef="let element">{{ element.original_appt_date | date:'MMM d, y':'timezone' }}
                </td>
              </ng-container>

              <ng-container matColumnDef="note">
                <th mat-header-cell *matHeaderCellDef>Status</th>
                <td mat-cell *matCellDef="let element">
                  <mat-form-field floatLabel="never" class="setPreviousDay">
                    <mat-select placeholder="Select Status" [(value)]="element.status" id="setNote2"
                      (selectionChange)="updateStatus($event.value,element.patient_id,element.original_appt_date,element.patients.clinic_id, 'tick-follower')">
                      <!--(selectionChange)="refreshPerformanceTab($event.value)" -->
                      <mat-option value="Ineligible">Ineligible</mat-option>
                      <mat-option value="Already booked">Already booked</mat-option>
                      <mat-option value="Did not want to book">Didnâ€™t want to book</mat-option>
                         <mat-option value="Cant be reached Call 1">Can't be reached - Call 1</mat-option>
                      <mat-option value="Cant be reached Call 2">Can't be reached - Call 2</mat-option>
                      <mat-option value="Cant be reached Call 3">Can't be reached - Call 3</mat-option>
                      <mat-option value="Booked">Booked</mat-option>
                    </mat-select>
                  </mat-form-field>
                </td>
              </ng-container>
                <ng-container matColumnDef="book">
                  <th mat-header-cell *matHeaderCellDef>Note</th>
                  <td mat-cell *matCellDef="let element"><i [ngClass] = "!element.notes? 'red' : 'green'" class="fas fa-book notes" (click) ="openNotes(element.notes,element.patient_id,element.original_appt_date)"></i></td>
              </ng-container>
              <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef>Complete</th>
                <td mat-cell *matCellDef="let element">
                  <mat-slide-toggle [checked]="element.is_complete == 0? false : true" name="status"
                    (change)="toggleUpdate($event,element.patient_id,element.original_appt_date,element.patients.clinic_id,'tick-follower')">
                  </mat-slide-toggle>
                </td>
              </ng-container>
              <ng-container matColumnDef="isDataAvailable1">
                <mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns3.length">
                  You have no tick followups today
                </mat-footer-cell>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumns3"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns3;"></tr>
              <mat-footer-row *matFooterRowDef="['isDataAvailable1']"
                [ngClass]="(followupTickFollowupsInCMP.length <= 0)? 'show' : 'hide'"></mat-footer-row>
            </table>
    </mat-tab>
    <!-- Reminders Tab end -->
  </mat-tab-group>
</div>