<div class="chart-container">
    <mat-icon
        [matTooltip]="toolTip"
        matTooltipPosition="below"
        color="primary"
        class="help-tip"
        fontIcon="help"
    ></mat-icon>
    <div class="chart-title">
        <mat-icon [color]="trendingIcon == 'trending_up'?'primary':'warn'" [fontIcon]="trendingIcon"></mat-icon>
        <span>
            {{displayTitle$ | async}}
        </span>
    </div>
    <div class="chart-content">
        <div class="canvas-wrapper chart-box">
            <div class="chart-gauge num-new-patients-gauge">
                <ngx-gauge
                    *ngIf="!(isLoading$ | async) && !(isMultipleClinic$ | async) && (hasData$ | async) && !(isTrend$ | async)"
                    type="arch"
                    [value]="newNumPatientsVal"
                    [thick]="20"
                    prepend="$"
                    foregroundColor="#4ccfae"
                    backgroundColor="#f4f0fa"
                    cap="round"
                    size="250"
                    [max]="maxNewNumPatientsGoal"
                >
                </ngx-gauge>
                <canvas
                    #mkNewNumPatients
                    *ngIf="!(isLoading$ | async) && ((isMultipleClinic$ | async) || (isTrend$ | async)) && (hasData$ | async)"
                    baseChart
                    [datasets]="datasets"
                    [labels]="labels"
                    [legend]="false"
                    type="bar"
                    [options]="chartOptions$ | async"
                    [colors]="lineChartColors"
                >
                </canvas>
                <spin-loader *ngIf="isLoading$ | async"></spin-loader>
                <spin-loader class="empty-placeholder" *ngIf="!(hasData$ | async)" [disableSpin]="true">
                    You have no {{(isActivePatients$ | async)?'active': 'new'}} patients in the selected period
                </spin-loader>
            </div>
            <div class="chart-foot"  *ngIf="!(isTrend$ | async)">
                <div>
                    <h3>${{ newNumPatientsVal | number: '1.0-0' }}</h3>
                    <span>{{ durationLabel$ | async }}</span>
                </div>
                <div>
                    <h3>${{ newNumPatientsPrev | number: '1.0-0' }}</h3>
                    <span>{{ durationTrendLabel$ | async }}</span>
                </div>
                <div *ngIf="!(isActivePatients$ | async)">
                    <h3>${{ newNumPatientsGoal * (goalCount$ | async) | number: '1.0-0' }}</h3>
                    <span>Goal</span>
                </div>
            </div>
        </div>
    </div>
</div>