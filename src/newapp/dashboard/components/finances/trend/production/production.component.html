<div class="chart-container">
    <mat-icon
        [matTooltip]="toolTip"
        matTooltipPosition="below"
        color="primary"
        class="help-tip"
        fontIcon="help"
    ></mat-icon>
    <div class="chart-title">
        {{chartName$ | async}}
    </div>
    <div class="chart-content flex-column">
        <div class="profit-prod-trend-chart">
            <div class="profit-switch">
                <button *ngFor="let chartName of profitChartNames" (click)="switchChartName(chartName)" 
                    [ngClass]="{'active': chartName == (chartName$ | async)}">{{chartName}}</button>
            </div>
            <div class="profit-graph">
                <spin-loader *ngIf="isLoading$ | async; else chartElement"></spin-loader>
                <ng-template #chartElement>
                    <canvas
                        *ngIf="datasets.length > 0 && datasets[0].data.length > 0 && !(isDisconnectedPlatform$ | async)"
                        baseChart
                        [datasets]="datasets"
                        [labels]="labels"
                        [options]="chartOptions$ | async"
                        [legend]="false"
                        [type]="chartType$ | async"
                    >
                    </canvas>
                </ng-template>
                <spin-loader *ngIf="isDisconnectedPlatform$ | async" [disableSpin]="true">
                    Please connect to Xero/MYOB to display this chart
                </spin-loader>
                <spin-loader *ngIf="!(datasets.length > 0 && datasets[0].data.length > 0) && !(isLoading$ | async)" [disableSpin]="true">
                    You have no data in the selected period
                </spin-loader>
            </div>
        </div>

    </div>
</div>