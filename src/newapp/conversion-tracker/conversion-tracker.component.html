<div class="conversion-tracker-container">
  <mat-card class="conversion-tracker-header">
    <div class="cards-wrapper">
      <app-conversion-insight-card
        type="Total Consult"
        icon="people"
        description="Total Consult"
        value="102"
        [metric]="8"
      />
      <app-conversion-insight-card
        type="Conversion Rate"
        icon="trending_up"
        description="Conversion Rate"
        value="56%"
        [metric]="4"
      />
      <app-conversion-insight-card
        type="Avg Time to Conversion"
        icon="schedule"
        description="Avg Time to Conversion"
        value="18 Days"
        [metric]="-2"
      />
    </div>
  </mat-card>
  <mat-card class="tab-group-container">
    <form [formGroup]="conversionCodeForm">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Select Conversion Code</mat-label>
        <mat-select formControlName="selectedConversionCode" #conversionCodeSelect="matSelect">
          <!-- ðŸ”¼ Add new item UI -->
          <mat-option disabled>
            <div class="add-new-option">
              <input
                matInput
                [formControl]="conversionCodeForm.get('newConversionCode')"
                placeholder="Add new conversion code..."
              />
              <button
                color="primary"
                (click)="addConversionCode()"
                [disabled]="conversionCodeForm.get('newConversionCode')?.invalid"
                mat-flat-button
              >
                Add
              </button>
            </div>
          </mat-option>

          <!-- ðŸ”½ Existing options -->
          <mat-option *ngFor="let conversionCode of conversionCodes" [value]="conversionCode">
            {{ conversionCode }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </form>
    <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
      <mat-tab label="Consults">
        <app-conversion-table [data]="consultsData"></app-conversion-table>
      </mat-tab>
      <mat-tab label="Recommended">
        <app-conversion-table [data]="recommendedData"></app-conversion-table>
      </mat-tab>
      <mat-tab label="Not Suitable">
        <app-conversion-table [data]="notSuitableData"></app-conversion-table>
      </mat-tab>
      <mat-tab label="Declined">
        <app-conversion-table [data]="declinedData"></app-conversion-table>
      </mat-tab>
    </mat-tab-group>
    <div class="buttons-wrapper">
      <button color="primary" mat-stroked-button>Export</button>
      <button color="primary" mat-flat-button (click)="onStartCampaign()">Start Campaign</button>
    </div>
  </mat-card>
</div>
